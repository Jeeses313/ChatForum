{"version":3,"sources":["queries/userqueries.js","reducers/notificationReducer.js","components/Notification.js","reducers/tokenReducer.js","reducers/userReducer.js","components/LoginForm.js","queries/chatqueries.js","queries/commentqueries.js","index.js","components/ChatListing.js","components/ChatForm.js","components/ChatsPage.js","components/PinnedChatsPage.js","components/ReportedChatsPage.js","components/CommentMedia.js","components/Comment.js","components/ReportedCommentsPage.js","components/CommentForm.js","components/Chat.js","components/ChatPage.js","components/ProfilePage.js","components/ErrorPage.js","components/LoggedInPage.js","components/SigninForm.js","reducers/modeReducer.js","components/Navigationbar.js","App.js","store.js"],"names":["timeout","LOGIN","gql","SIGNIN","USER","SET_PROFILEPIC","DELETE_PROFILEPIC","setNotification","notification","time","dispatch","a","clearTimeout","setTimeout","type","reducer","state","action","Notification","useSelector","style","position","width","textAlign","zIndex","useDispatch","clearAlert","error","Alert","variant","className","onClick","message","setToken","token","data","setUser","user","LoginForm","useState","username","setUsername","password","setPassword","history","useHistory","mode","useMutation","onError","graphQLErrors","login","result","useEffect","value","localStorage","setItem","push","JSON","stringify","borderColor","backgroundColor","Form","onSubmit","event","preventDefault","variables","Label","Control","id","name","onChange","target","required","Button","to","CREATE_CHAT","DELETE_CHAT","CHATS","CHATS_PINNED","REPORTED_CHATS","CHAT","PINNED_CHATS","CHAT_ADDED","CHAT_REPORTED","CHAT_DELETED","PIN_CHAT","UNPIN_CHAT","REPORT_CHAT","UNREPORT_CHAT","ZEROREPORT_CHAT","wsLink","CREATE_COMMENT","REPORTED_COMMENTS","COMMENT_ADDED","DELETE_COMMENT","COMMENT_DELETED","EDIT_COMMENT","COMMENT_EDITED","COMMENT_REPORTED","REPORT_COMMENT","UNREPORT_COMMENT","ZEROREPORT_COMMENT","Chat","chat","isPinned","submitPin","submitUnpin","currentUser","latestComment","options","weekday","year","month","day","hour","minute","date","Date","toLocaleTimeString","content","length","substring","deleteChat","reportChat","reportResult","unreportChat","unreportResult","zeroReportChat","zeroReportResult","loading","called","borderStyle","borderRadius","padding","marginBottom","title","admin","reports","size","window","confirm","chatTitle","chatId","includes","ChatForm","setTitle","create","createChat","resize","Row","Col","md","paddingRight","paddingLeft","as","rows","placeholder","block","height","ChatsPage","chats","setChats","useLazyQuery","loadChats","chatsResult","loadPinnedChats","pinnedChatsResult","chatsToShow","setChatsToShow","filter","setFilter","pinnedChats","setPinnedChats","sortChats","useCallback","chatA","chatB","dateA","dateB","slice","sort","map","useSubscription","onSubscriptionData","newChat","subscriptionData","chatAdded","newChats","concat","newComment","commentAdded","comment","reportedChat","chatReported","toLowerCase","startsWith","pinChat","pinResult","unpinChat","unpinResult","pchat","deletedChat","chatDeleted","filterStyle","paddingBottom","colStyle","display","overflowY","ChatListing","key","console","log","ReportedChatsPage","loadReportedChats","reportedChatsResult","reportedChats","CommentMedia","imageUrl","hasVideo","show","setShow","frameBorder","allowFullScreen","src","OverlayTrigger","placement","delay","hide","overlay","Tooltip","Image","maxWidth","maxHeight","Modal","onHide","Header","closeButton","Body","alignItems","fluid","Comment","setContent","editing","setEditing","setImageUrl","deleteComment","deleteResult","editComment","editResult","profileImage","reportComment","unreportComment","zeroReportComment","contentBoxStyle","border","urlStyle","readOnly","commentId","endsWith","ReportedCommentsPage","comments","setComments","commentsToShow","setCommentsToShow","loadComments","commentsResult","commentsEndRef","useRef","toScroll","setToScroll","sortComments","commentA","commentB","scrollToBottom","current","scrollIntoView","behavior","reportedComments","deletedComment","commentDeleted","editedComment","commentEdited","reportedComment","commentReported","newComments","ref","CommentForm","onCompleted","send","contentStyle","setChat","loadChat","chatResult","fontSize","ChatPage","match","useRouteMatch","params","ProfilePage","editImageUrl","setEditImageUrl","loadUser","userResult","image","setImage","setProfilePic","profilePicResult","setUserProfilePic","deleteProfilePic","deleteProfilePicResult","ErrorPage","errormessage","LoggedInPage","Container","path","PinnedChatsPage","SigninForm","signin","createUser","setMode","Navigationbar","handleLogout","removeItem","Navbar","collapseOnSelect","expand","bg","Brand","href","Nav","Link","Collapse","Text","Toggle","aria-controls","App","document","body","left","top","combineReducers","notificationReducer","userReducer","tokenReducer","modeReducer","store","createStore","composeWithDevTools","applyMiddleware","thunk","authLink","setContext","_","headers","getItem","authorization","httpLink","HttpLink","uri","location","host","WebSocketLink","reconnect","splitLink","split","query","definition","getMainDefinition","kind","operation","client","ApolloClient","cache","InMemoryCache","link","defaultOptions","watchQuery","fetchPolicy","mutation","loggedToken","loggedUser","parse","ReactDOM","render","ApolloProvider","getElementById"],"mappings":"2qDAEO,ICOHA,EDPSC,EAAQC,YAAH,KAgBLC,EAASD,YAAH,KAgBNE,EAAOF,YAAH,KASJG,EAAiBH,YAAH,KASdI,EAAoBJ,YAAH,K,0CCzCjBK,EAAkB,SAAlBA,EAAmBC,EAAcC,GAC1C,8CAAO,WAAMC,GAAN,SAAAC,EAAA,sDACkB,KAAjBH,IACAI,aAAaZ,GACbA,EAAUa,YAAW,WACjBH,EAASH,EAAgB,OACnB,IAAPE,IAEPC,EAAS,CACLI,KAAM,mBACNN,aAAcA,IATf,2CAAP,mDAAM,IAcKO,EA1BC,WAAyB,IAAxBC,EAAuB,uDAAf,GAAIC,EAAW,uCACpC,OAAQA,EAAOH,MACX,IAAK,mBACD,OAAOG,EAAOT,aAElB,QAAS,OAAOQ,ICsBTE,EAtBM,WACjB,IAAMV,EAAeW,aAAY,SAAAH,GAAK,OAAIA,EAAMR,gBAC1CY,EAAQ,CAAEC,SAAU,WAAYC,MAAO,OAAQC,UAAW,SAAUC,OAAO,MAC3Ed,EAAWe,cACXC,EAAa,WACfhB,EAASH,EAAgB,MAE7B,MAAqB,KAAjBC,EAEI,qCAGJA,EAAamB,MAET,kBAACC,EAAA,EAAD,CAAOR,MAAOA,EAAOS,QAAQ,SAASC,UAAU,eAAeC,QAASL,GAAalB,EAAawB,SAItG,kBAACJ,EAAA,EAAD,CAAOR,MAAOA,EAAOS,QAAQ,UAAUC,UAAU,UAAUC,QAASL,GAAalB,EAAawB,UCdzFC,EAAW,SAACC,GACrB,8CAAO,WAAMxB,GAAN,SAAAC,EAAA,sDACHD,EAAS,CACLI,KAAM,YACNqB,KAAMD,IAHP,2CAAP,mDAAM,IAQKnB,EAlBC,WAA2B,IAA1BC,EAAyB,uDAAjB,KAAMC,EAAW,uCACtC,OAAQA,EAAOH,MACX,IAAK,YACD,OAAOG,EAAOkB,KAElB,QAAS,OAAOnB,ICIXoB,EAAU,SAACC,GACpB,8CAAO,WAAM3B,GAAN,SAAAC,EAAA,sDAEHD,EAAS,CACLI,KAAM,WACNqB,KAAME,IAJP,2CAAP,mDAAM,IASKtB,EAnBC,WAA2B,IAA1BC,EAAyB,uDAAjB,KAAMC,EAAW,uCACtC,OAAQA,EAAOH,MACX,IAAK,WACD,OAAOG,EAAOkB,KAElB,QAAS,OAAOnB,I,QC0DTsB,EApDG,WAAO,IAAD,EACYC,mBAAS,IADrB,mBACbC,EADa,KACHC,EADG,OAEYF,mBAAS,IAFrB,mBAEbG,EAFa,KAEHC,EAFG,KAGdjC,EAAWe,cACXmB,EAAUC,cACVC,EAAO3B,aAAY,SAAAH,GAAK,OAAIA,EAAM8B,QALpB,EAMIC,YAAY9C,EAAO,CACvC+C,QAAS,SAACrB,GACNjB,EAASH,EAAgB,CAAEyB,QAASL,EAAMsB,cAAc,GAAGjB,QAASL,OAAO,GAAQ,QARvE,mBAMbuB,EANa,KAMNC,EANM,KAWpBC,qBAAU,WACN,GAAID,EAAOhB,KAAM,CACb,IAAMD,EAAQiB,EAAOhB,KAAKe,MAAMG,MAC1BhB,EAAOc,EAAOhB,KAAKe,MAAMb,KAC/B3B,EAASuB,EAASC,IAClBoB,aAAaC,QAAQ,aAAcrB,GACnCU,EAAQY,KAAK,KACbF,aAAaC,QAAQ,cAAeE,KAAKC,UAAUrB,IACnD3B,EAAS0B,EAAQC,IACjB3B,EAASH,EAAgB,CAAEyB,QAAS,YAAaL,OAAO,GAAS,QAEtE,CAACwB,EAAOhB,OACX,IAMMf,EAAQ,CAAEuC,YAAa,QAM7B,OAJIvC,EAAMwC,gBADG,UAATd,EACwB,QAEA,WAGxB,oCACI,kBAAC,EAAD,MACA,yBAAKhB,UAAU,aACX,qCACA,kBAAC+B,EAAA,EAAD,CAAMC,SAjBH,SAACC,GACZA,EAAMC,iBACNd,EAAM,CAAEe,UAAW,CAAEzB,WAAUE,cAC/BD,EAAY,IACZE,EAAY,MAcA,kBAACkB,EAAA,EAAKK,MAAN,kBACA,kBAACL,EAAA,EAAKM,QAAN,CAAcrD,KAAK,OAAOsD,GAAG,WAAWhD,MAAOA,EAAOiC,MAAOb,EAAU6B,KAAK,WAAWC,SAAU,gBAAGC,EAAH,EAAGA,OAAH,OAAgB9B,EAAY8B,EAAOlB,QAAQmB,UAAQ,IACpJ,kBAACX,EAAA,EAAKK,MAAN,kBACA,kBAACL,EAAA,EAAKM,QAAN,CAAcrD,KAAK,WAAWsD,GAAG,WAAWhD,MAAOA,EAAOiC,MAAOX,EAAU2B,KAAK,WAAWC,SAAU,gBAAGC,EAAH,EAAGA,OAAH,OAAgB5B,EAAY4B,EAAOlB,QAAQmB,UAAQ,IACxJ,kBAACC,EAAA,EAAD,CAAQL,GAAG,SAAStD,KAAK,UAAzB,SALJ,OAKwD,kBAAC,IAAD,CAAM4D,GAAG,WAAT,e,qvICtDjE,IAAMC,GAAczE,YAAH,MAQX0E,GAAc1E,YAAH,MAQX2E,GAAQ3E,YAAH,MAkBL4E,GAAe5E,YAAH,KAkBZ6E,GAAiB7E,YAAH,KAkBd8E,GAAO9E,YAAH,KAqBJ+E,GAAe/E,YAAH,KAQZgF,GAAahF,YAAH,KAkBViF,GAAgBjF,YAAH,KA8BbkF,GAAelF,YAAH,KASZmF,GAAWnF,YAAH,KAQRoF,GAAapF,YAAH,KAQVqF,GAAcrF,YAAH,KAQXsF,GAAgBtF,YAAH,KAQbuF,GAAkBvF,YAAH,K,ylGC5LrB,ICoCHwF,GDpCSC,GAAiBzF,YAAH,MAiBd0F,GAAoB1F,YAAH,MAiBjB2F,GAAgB3F,YAAH,MAoBb4F,GAAiB5F,YAAH,MASd6F,GAAkB7F,YAAH,MAWf8F,GAAe9F,YAAH,MAaZ+F,GAAiB/F,YAAH,MAYdgG,GAAmBhG,YAAH,MAYhBiG,GAAiBjG,YAAH,MAQdkG,GAAmBlG,YAAH,MAQhBmG,GAAqBnG,YAAH,MEFhBoG,GAvHF,SAAC,GAAgD,IAA9CC,EAA6C,EAA7CA,KAAMC,EAAuC,EAAvCA,SAAUC,EAA6B,EAA7BA,UAAWC,EAAkB,EAAlBA,YACjChG,EAAWe,cACXkF,EAAcxF,aAAY,SAAAH,GAAK,OAAIA,EAAMqB,QAC3CuE,EAAgB,mBACdC,EAAU,CAAEC,QAAS,OAAQC,KAAM,UAAWC,MAAO,OAAQC,IAAK,UAAWC,KAAM,UAAWC,OAAQ,WACxGC,EAAO,IAAIC,KAAKd,EAAKa,MAAME,mBAAmB,GAAIT,GAClDN,EAAKK,gBAEDA,EADAL,EAAKK,cAAcW,QAAQC,OAAS,GACvB,UAAMjB,EAAKK,cAAcW,QAAQE,UAAU,EAAG,IAA9C,gBAAyDlB,EAAKK,cAAcvE,KAAKG,UAEjF,UAAM+D,EAAKK,cAAcW,QAAzB,aAAqChB,EAAKK,cAAcvE,KAAKG,UAE9E4E,EAAO,IAAIC,KAAKd,EAAKK,cAAcQ,MAAME,mBAAmB,GAAIT,IAZX,MAc5B9D,YAAY6B,GAAa,CAClD5B,QAAS,SAACrB,GACNjB,EAASH,EAAgB,CAAEyB,QAASL,EAAMsB,cAAc,GAAGjB,QAASL,OAAO,GAAQ,QAhBlC,mBAclD+F,EAdkD,aAwBtB3E,YAAYwC,GAAa,CACxDvC,QAAS,SAACrB,GACNjB,EAASH,EAAgB,CAAEyB,QAASL,EAAMsB,cAAc,GAAGjB,QAASL,OAAO,GAAQ,SA1BlC,mBAwBlDgG,EAxBkD,KAwBtCC,EAxBsC,KAkCzDxE,qBAAU,WACFwE,EAAazF,MACbzB,EAASH,EAAgB,CAAEyB,QAAS,gBAAiBL,OAAO,GAAS,OAE1E,CAACiG,EAAazF,OAtCwC,MAuClBY,YAAYyC,GAAe,CAC9DxC,QAAS,SAACrB,GACNjB,EAASH,EAAgB,CAAEyB,QAASL,EAAMsB,cAAc,GAAGjB,QAASL,OAAO,GAAQ,QAzClC,mBAuClDkG,EAvCkD,KAuCpCC,EAvCoC,KAiDzD1E,qBAAU,WACF0E,EAAe3F,MACfzB,EAASH,EAAgB,CAAEyB,QAAS,kBAAmBL,OAAO,GAAS,OAE5E,CAACmG,EAAe3F,OArDsC,MAsDdY,YAAY0C,GAAiB,CACpEzC,QAAS,SAACrB,GACNjB,EAASH,EAAgB,CAAEyB,QAASL,EAAMsB,cAAc,GAAGjB,QAASL,OAAO,GAAQ,QAxDlC,mBAsDlDoG,EAtDkD,KAsDlCC,EAtDkC,KAgEzD5E,qBAAU,WACF4E,EAAiBC,SAAWD,EAAiBE,QAC7CxH,EAASH,EAAgB,CAAEyB,QAAS,wBAA0BL,OAAO,GAAS,OAEnF,CAACqG,IAOJ,OACI,yBAAK5G,MAPQ,CACb+G,YAAa,QACbC,aAAc,MACdC,QAAS,OACTC,aAAc,SAIV,6BACI,kBAAC,IAAD,CAAM5D,GAAE,iBAAY6B,EAAKgC,QAAUhC,EAAKgC,OACvC5B,EAAY6B,MACT,iDAAajC,EAAKkC,QAAQjB,QAE1B,sCAIR,6BACKZ,GAEL,6BACKQ,EADL,OAEKZ,EACG,kBAAC/B,EAAA,EAAD,CAAQ3D,KAAK,SAAS4H,KAAK,KAAK3G,QAAS,kBAAM2E,EAAYH,KAA3D,SAEA,kBAAC9B,EAAA,EAAD,CAAQ3D,KAAK,SAAS4H,KAAK,KAAK3G,QAAS,kBAAM0E,EAAUF,KAAzD,OAEHI,EAAY6B,MACT,oCACKjC,EAAKkC,QAAQjB,OAAS,EACnB,kBAAC/C,EAAA,EAAD,CAAQ3D,KAAK,SAAS4H,KAAK,KAAK3G,QAxC/B,WACjB4G,OAAOC,QAAQ,yBACfb,EAAe,CAAE9D,UAAW,CAAE4E,UAAWtC,EAAKgC,WAsC9B,gBAEA,qCAEJ,kBAAC9D,EAAA,EAAD,CAAQ3D,KAAK,SAAS4H,KAAK,KAAK3G,QApF/B,WACb4G,OAAOC,QAAQ,iBACflB,EAAW,CAAEzD,UAAW,CAAE6E,OAAQvC,EAAKnC,QAkF3B,WAGJ,oCACKmC,EAAKkC,QAAQM,SAASpC,EAAYvC,IAC/B,kBAACK,EAAA,EAAD,CAAQ3D,KAAK,SAAS4H,KAAK,KAAK3G,QAhEjC,WACf4G,OAAOC,QAAQ,mBACff,EAAa,CAAE5D,UAAW,CAAE4E,UAAWtC,EAAKgC,WA8D5B,YAEA,kBAAC9D,EAAA,EAAD,CAAQ3D,KAAK,SAAS4H,KAAK,KAAK3G,QAjFnC,WACb4G,OAAOC,QAAQ,iBACfjB,EAAW,CAAE1D,UAAW,CAAE4E,UAAWtC,EAAKgC,WA+E1B,c,oBCrEbS,GAzCE,WAAO,IAAD,EACOzG,mBAAS,IADhB,mBACZgG,EADY,KACLU,EADK,KAEbvI,EAAWe,cACXqB,EAAO3B,aAAY,SAAAH,GAAK,OAAIA,EAAM8B,QAClCF,EAAUC,cAJG,EAKME,YAAY4B,GAAa,CAC9C3B,QAAS,SAACrB,GACNjB,EAASH,EAAgB,CAAEyB,QAASL,EAAMsB,cAAc,GAAGjB,QAASL,OAAO,GAAQ,QAPxE,mBAKZuH,EALY,KAKJ/F,EALI,KAenBC,qBAAU,WACFD,EAAOhB,OACPzB,EAASH,EAAgB,CAAEyB,QAAS,mBAAoBL,OAAO,GAAS,KACxEiB,EAAQY,KAAR,iBAAuBL,EAAOhB,KAAKgH,WAAWZ,WAEnD,CAACpF,EAAOhB,OACX,IAAMf,EAAQ,CAAEgI,OAAQ,OAAQzF,YAAa,QAM7C,OAJIvC,EAAMwC,gBADG,UAATd,EACwB,QAEA,WAGxB,kBAACe,EAAA,EAAD,CAAMC,SAlBK,SAACC,GACZA,EAAMC,iBACNkF,EAAO,CAAEjF,UAAW,CAAE4E,UAAWN,KACjCU,EAAS,MAgBL,kBAACI,GAAA,EAAD,CAAKX,KAAK,MACN,kBAACY,GAAA,EAAD,CAAKC,GAAG,KAAKnI,MAAO,CAAEoI,aAAc,IAAKC,YAAa,MAClD,kBAAC5F,EAAA,EAAKM,QAAN,CAAcuF,GAAG,WAAWC,KAAK,IAAIvI,MAAOA,EAAOgD,GAAG,UAAUf,MAAOkF,EAAOlE,KAAK,UAAUC,SAAU,gBAAGC,EAAH,EAAGA,OAAH,OAAgB0E,EAAS1E,EAAOlB,QAAQuG,YAAY,WAAWpF,UAAQ,EAACqF,MAAM,UAEzL,kBAACP,GAAA,EAAD,CAAKC,GAAG,IAAInI,MAAO,CAAEoI,aAAc,IAAKC,YAAa,MACjD,kBAAChF,EAAA,EAAD,CAAQrD,MAAO,CAAE0I,OAAQ,QAAU1F,GAAG,SAAStD,KAAK,SAAS4H,KAAK,KAAKmB,MAAM,QAA7E,sBCgILE,GAhKG,WACd,IAAMrJ,EAAWe,cACXqB,EAAO3B,aAAY,SAAAH,GAAK,OAAIA,EAAM8B,QAFpB,EAGMP,mBAAS,IAHf,mBAGbyH,EAHa,KAGNC,EAHM,OAIaC,YAAarF,IAJ1B,mBAIbsF,EAJa,KAIFC,EAJE,OAKyBF,YAAajF,IALtC,mBAKboF,EALa,KAKIC,EALJ,OAMkB/H,mBAAS,IAN3B,mBAMbgI,EANa,KAMAC,EANA,OAOQjI,mBAAS,IAPjB,mBAObkI,EAPa,KAOLC,EAPK,OAQkBnI,qBARlB,mBAQboI,EARa,KAQAC,EARA,KASdC,EAAYC,uBAAY,SAACC,EAAOC,GAClC,IAAKL,EACD,OAAO,EAEX,GAAIA,EAAY5B,SAASgC,EAAMxC,SAAWoC,EAAY5B,SAASiC,EAAMzC,OACjE,OAAQ,EAEZ,IAAKoC,EAAY5B,SAASgC,EAAMxC,QAAUoC,EAAY5B,SAASiC,EAAMzC,OACjE,OAAO,EAEX,IAAI0C,EAAQF,EAAM3D,KACd2D,EAAMnE,gBACNqE,EAAQF,EAAMnE,cAAcQ,MAEhC,IAAI8D,EAAQF,EAAM5D,KAIlB,OAHI4D,EAAMpE,gBACNsE,EAAQF,EAAMpE,cAAcQ,MAEzB8D,EAAQD,IAChB,CAACN,IACJvH,qBAAU,WACN+G,IACAE,MACD,IACHjH,qBAAU,WACFgH,EAAYjI,OACZ8H,EAASG,EAAYjI,KAAK6H,MAAMmB,MAAM,GAAGC,KAAKP,IAC9CL,EAAeR,MAEpB,CAACI,EAAYjI,OAChBiB,qBAAU,WACFkH,EAAkBnI,MAClByI,EAAeN,EAAkBnI,KAAKwI,YAAYU,KAAI,SAAA9E,GAAI,OAAIA,EAAKgC,YAExE,CAAC+B,EAAkBnI,OACtBmJ,YAAgBpG,GAAY,CACxBqG,mBAAoB,YAA2B,IACrCC,EADoC,EAAvBC,iBACctJ,KAAKuJ,UAChCC,EAAW3B,EAAM4B,OAAOJ,GAC9BG,EAASP,KAAKP,GACdZ,EAAS0B,MAGjBL,YAAgBzF,GAAe,CAC3B0F,mBAAoB,YAA2B,IAAxBE,EAAuB,EAAvBA,iBACbI,EAAaJ,EAAiBtJ,KAAK2J,aAAaC,QAChDlD,EAAY4C,EAAiBtJ,KAAK2J,aAAajD,UAC/C8C,EAAW3B,EAAMqB,KAAI,SAAA9E,GAAI,OAAIA,EAAKgC,QAAUM,EAAf,eAAgCtC,EAAhC,CAAsCK,cAAeiF,IAAetF,KACvGoF,EAASP,KAAKP,GACdZ,EAAS0B,MAGjBL,YAAgBnG,GAAe,CAC3BoG,mBAAoB,YAA2B,IACrCS,EADoC,EAAvBP,iBACmBtJ,KAAK8J,aACrCN,EAAW3B,EAAMqB,KAAI,SAAA9E,GAAI,OAAIA,EAAKgC,QAAUyD,EAAazD,MAA5B,eAAyChC,EAAzC,CAA+CkC,QAASuD,EAAavD,UAAYlC,KACpHoF,EAASP,KAAKP,GACdZ,EAAS0B,MAGjBvI,qBAAU,WAEFoH,EADW,KAAXC,EACeT,EAAMmB,MAAM,GAAGC,KAAKP,GAEpBb,EAAMS,QAAO,SAAAlE,GAAI,OAAIA,EAAKgC,MAAM2D,cAAcC,WAAW1B,EAAOyB,kBAAgBd,KAAKP,MAEzG,CAACJ,EAAQT,EAAOa,IA3EC,MA4ES9H,YAAYsC,GAAU,CAC/CrC,QAAS,SAACrB,GACNjB,EAASH,EAAgB,CAAEyB,QAASL,EAAMsB,cAAc,GAAGjB,QAASL,OAAO,GAAQ,QA9EvE,mBA4EbyK,EA5Ea,KA4EJC,EA5EI,OAiFatJ,YAAYuC,GAAY,CACrDtC,QAAS,SAACrB,GACNjB,EAASH,EAAgB,CAAEyB,QAASL,EAAMsB,cAAc,GAAGjB,QAASL,OAAO,GAAQ,QAnFvE,mBAiFb2K,EAjFa,KAiFFC,EAjFE,KAsFd9F,EAAY,SAACF,GACXoC,OAAOC,QAAQ,cACfwD,EAAQ,CAAEnI,UAAW,CAAE4E,UAAWtC,EAAKgC,UAG/CnF,qBAAU,WACFiJ,EAAUlK,OACVyI,EAAeD,EAAYiB,OAAOS,EAAUlK,KAAKiK,QAAQ7D,QACzD7H,EAASH,EAAgB,CAAEyB,QAAS,cAAeL,OAAO,GAAS,QAExE,CAAC0K,EAAUlK,OACd,IAAMuE,EAAc,SAACH,GACboC,OAAOC,QAAQ,gBACf0D,EAAU,CAAErI,UAAW,CAAE4E,UAAWtC,EAAKgC,UAGjDnF,qBAAU,WACFmJ,EAAYpK,OACZyI,EAAeD,EAAYF,QAAO,SAAA+B,GAAK,OAAIA,IAAUD,EAAYpK,KAAKmK,UAAU/D,UAChF7H,EAASH,EAAgB,CAAEyB,QAAS,gBAAiBL,OAAO,GAAS,QAE1E,CAAC4K,EAAYpK,OAChBmJ,YAAgBlG,GAAc,CAC1BmG,mBAAoB,YAA2B,IACrCkB,EADoC,EAAvBhB,iBACkBtJ,KAAKuK,YAC1CzC,EAASD,EAAMS,QAAO,SAAAlE,GAAI,OAAIA,EAAKnC,KAAOqI,EAAYrI,UAG9D,IASMuI,EAAc,CAAErL,MAAO,OAAQsL,cAAe,IAAKjJ,YAAa,QAElEgJ,EAAY/I,gBADH,UAATd,EAC8B,QAEA,WAElC,IAAM+J,EAAW,CAAErD,aAAc,IAAKC,YAAa,KACnD,OACI,yBAAKrI,MAAO,CAAE0I,OAAQ,SAClB,kBAACT,GAAA,EAAD,KACI,kBAACC,GAAA,EAAD,CAAKC,GAAG,IAAInI,MAAOyL,GACf,wBAAIzL,MAAO,CAAE0L,QAAS,eAAgBxE,aAAc,MAApD,UAEJ,kBAACgB,GAAA,EAAD,CAAKC,GAAG,IAAInI,MAAOyL,GACf,2BAAOzL,MAAOuL,EAAa7L,KAAK,OAAOuC,MAAOoH,EAAQnG,SAAU,gBAAGC,EAAH,EAAGA,OAAH,OAAgBmG,EAAUnG,EAAOlB,QAAQuG,YAAY,+BAG7H,kBAACP,GAAA,EAAD,KACI,kBAACC,GAAA,EAAD,CAAKlI,MAAOyL,GACR,yBAAKzL,MA5BJ,CACb+G,YAAa,QACbC,aAAc,MACdzE,YAAa,OACb0E,QAAS,OACTC,aAAc,IACdyE,UAAW,SACXjD,OAAQ,WAsBSa,EACG,oCACKJ,EAAYc,KAAI,SAAA9E,GAAI,OACjB,kBAACyG,GAAD,CAAaC,IAAK1G,EAAKnC,GAAImC,KAAMA,EAAME,UAAWA,EAAWC,YAAaA,EAAaF,SAAUmE,EAAY5B,SAASxC,EAAKgC,aAInI,2CAKhB,kBAAC,GAAD,QCSGwB,GApKG,WACd,IAAMrJ,EAAWe,cACXqB,EAAO3B,aAAY,SAAAH,GAAK,OAAIA,EAAM8B,QAFpB,EAGMP,mBAAS,IAHf,mBAGbyH,EAHa,KAGNC,EAHM,OAIaC,YAAapF,IAJ1B,mBAIbqF,EAJa,KAIFC,EAJE,OAKyBF,YAAajF,IALtC,mBAKboF,EALa,KAKIC,EALJ,OAMkB/H,mBAAS,IAN3B,mBAMbgI,EANa,KAMAC,EANA,OAOQjI,mBAAS,IAPjB,mBAObkI,EAPa,KAOLC,EAPK,OAQkBnI,qBARlB,mBAQboI,EARa,KAQAC,EARA,KASdC,EAAYC,uBAAY,SAACC,EAAOC,GAClC,IAAKL,EACD,OAAO,EAEX,GAAIA,EAAY5B,SAASgC,EAAMxC,SAAWoC,EAAY5B,SAASiC,EAAMzC,OACjE,OAAQ,EAEZ,IAAKoC,EAAY5B,SAASgC,EAAMxC,QAAUoC,EAAY5B,SAASiC,EAAMzC,OACjE,OAAO,EAEX,IAAI0C,EAAQF,EAAM3D,KACd2D,EAAMnE,gBACNqE,EAAQF,EAAMnE,cAAcQ,MAEhC,IAAI8D,EAAQF,EAAM5D,KAIlB,OAHI4D,EAAMpE,gBACNsE,EAAQF,EAAMpE,cAAcQ,MAEzB8D,EAAQD,IAChB,CAACN,IACJvH,qBAAU,WACN+G,IACAE,MACD,IACHjH,qBAAU,WACFgH,EAAYjI,OACZ+K,QAAQC,IAAI/C,EAAYjI,MACxB8H,EAASG,EAAYjI,KAAKwI,YAAYQ,MAAM,GAAGC,KAAKP,IACpDL,EAAeR,MAEpB,CAACI,EAAYjI,OAChBiB,qBAAU,WACFkH,EAAkBnI,MAClByI,EAAeN,EAAkBnI,KAAKwI,YAAYU,KAAI,SAAA9E,GAAI,OAAIA,EAAKgC,YAExE,CAAC+B,EAAkBnI,OACtBmJ,YAAgBpG,GAAY,CACxBqG,mBAAoB,YAA2B,IACrCC,EADoC,EAAvBC,iBACctJ,KAAKuJ,UAChCC,EAAW3B,EAAM4B,OAAOJ,GAC9BG,EAASP,KAAKP,GACdZ,EAAS0B,MAGjBL,YAAgBzF,GAAe,CAC3B0F,mBAAoB,YAA2B,IAAxBE,EAAuB,EAAvBA,iBACbI,EAAaJ,EAAiBtJ,KAAK2J,aAAaC,QAChDlD,EAAY4C,EAAiBtJ,KAAK2J,aAAajD,UAC/C8C,EAAW3B,EAAMqB,KAAI,SAAA9E,GAAI,OAAIA,EAAKgC,QAAUM,EAAf,eAAgCtC,EAAhC,CAAsCK,cAAeiF,IAAetF,KACvGoF,EAASP,KAAKP,GACdZ,EAAS0B,MAGjBL,YAAgBnG,GAAe,CAC3BoG,mBAAoB,YAA2B,IACrCS,EADoC,EAAvBP,iBACmBtJ,KAAK8J,aACrCN,EAAW3B,EAAMqB,KAAI,SAAA9E,GAAI,OAAIA,EAAKgC,QAAUyD,EAAazD,MAA5B,eAAyChC,EAAzC,CAA+CkC,QAASuD,EAAavD,UAAYlC,KACpHoF,EAASP,KAAKP,GACdZ,EAAS0B,MAGjBvI,qBAAU,WAEFoH,EADW,KAAXC,EACeT,EAAMmB,MAAM,GAAGC,KAAKP,GAEpBb,EAAMS,QAAO,SAAAlE,GAAI,OAAIA,EAAKgC,MAAM2D,cAAcC,WAAW1B,EAAOyB,kBAAgBd,KAAKP,MAEzG,CAACJ,EAAQT,EAAOa,IA5EC,MA6ES9H,YAAYsC,GAAU,CAC/CrC,QAAS,SAACrB,GACNjB,EAASH,EAAgB,CAAEyB,QAASL,EAAMsB,cAAc,GAAGjB,QAASL,OAAO,GAAQ,QA/EvE,mBA6EbyK,EA7Ea,KA6EJC,EA7EI,OAkFatJ,YAAYuC,GAAY,CACrDtC,QAAS,SAACrB,GACNjB,EAASH,EAAgB,CAAEyB,QAASL,EAAMsB,cAAc,GAAGjB,QAASL,OAAO,GAAQ,QApFvE,mBAkFb2K,EAlFa,KAkFFC,EAlFE,KAuFd9F,EAAY,SAACF,GACXoC,OAAOC,QAAQ,cACfwD,EAAQ,CAAEnI,UAAW,CAAE4E,UAAWtC,EAAKgC,UAG/CnF,qBAAU,WACFiJ,EAAUlK,OACVyI,EAAeD,EAAYiB,OAAOS,EAAUlK,KAAKiK,QAAQ7D,QACzD7H,EAASH,EAAgB,CAAEyB,QAAS,cAAeL,OAAO,GAAS,QAExE,CAAC0K,EAAUlK,OACd,IAAMuE,EAAc,SAACH,GACboC,OAAOC,QAAQ,gBACf0D,EAAU,CAAErI,UAAW,CAAE4E,UAAWtC,EAAKgC,UAGjDnF,qBAAU,WACFmJ,EAAYpK,OACZyI,EAAeD,EAAYF,QAAO,SAAA+B,GAAK,OAAIA,IAAUD,EAAYpK,KAAKmK,UAAU/D,UAChF7H,EAASH,EAAgB,CAAEyB,QAAS,gBAAiBL,OAAO,GAAS,QAE1E,CAAC4K,EAAYpK,OAChBiB,qBAAU,WACN6G,EAASD,EAAMS,QAAO,SAAA+B,GAAK,OAAI7B,EAAY5B,SAASyD,EAAMjE,aAC3D,CAACoC,IACJW,YAAgBlG,GAAc,CAC1BmG,mBAAoB,YAA2B,IACrCkB,EADoC,EAAvBhB,iBACkBtJ,KAAKuK,YAC1CzC,EAASD,EAAMS,QAAO,SAAAlE,GAAI,OAAIA,EAAKnC,KAAOqI,EAAYrI,UAG9D,IASMuI,EAAc,CAAErL,MAAO,OAAQsL,cAAe,IAAKjJ,YAAa,QAElEgJ,EAAY/I,gBADH,UAATd,EAC8B,QAEA,WAElC,IAAM+J,EAAW,CAAErD,aAAc,IAAKC,YAAa,KACnD,OACI,yBAAKrI,MAAO,CAAE0I,OAAQ,SAClB,kBAACT,GAAA,EAAD,KACI,kBAACC,GAAA,EAAD,CAAKC,GAAG,IAAInI,MAAOyL,GACf,wBAAIzL,MAAO,CAAE0L,QAAS,eAAgBxE,aAAc,MAApD,iBAEJ,kBAACgB,GAAA,EAAD,CAAKC,GAAG,IAAInI,MAAOyL,GACf,2BAAOzL,MAAOuL,EAAa7L,KAAK,OAAOuC,MAAOoH,EAAQnG,SAAU,gBAAGC,EAAH,EAAGA,OAAH,OAAgBmG,EAAUnG,EAAOlB,QAAQuG,YAAY,+BAG7H,kBAACP,GAAA,EAAD,KACI,kBAACC,GAAA,EAAD,CAAKlI,MAAOyL,GACR,yBAAKzL,MA5BJ,CACb+G,YAAa,QACbC,aAAc,MACdzE,YAAa,OACb0E,QAAS,OACTC,aAAc,IACdyE,UAAW,SACXjD,OAAQ,WAsBSa,EACG,oCACKJ,EAAYc,KAAI,SAAA9E,GAAI,OACjB,kBAACyG,GAAD,CAAaC,IAAK1G,EAAKnC,GAAImC,KAAMA,EAAME,UAAWA,EAAWC,YAAaA,EAAaF,SAAUmE,EAAY5B,SAASxC,EAAKgC,aAInI,2CAKhB,kBAAC,GAAD,QCaG6E,GA5KW,WACtB,IAAM1M,EAAWe,cACXqB,EAAO3B,aAAY,SAAAH,GAAK,OAAIA,EAAM8B,QAClC6D,EAAcxF,aAAY,SAAAH,GAAK,OAAIA,EAAMqB,QACzCO,EAAUC,cAJY,EAKFN,mBAAS,IALP,mBAKrByH,EALqB,KAKdC,EALc,OAMqBC,YAAanF,IANlC,mBAMrBsI,EANqB,KAMFC,EANE,OAOiBpD,YAAajF,IAP9B,mBAOrBoF,EAPqB,KAOJC,EAPI,OAQU/H,mBAAS,IARnB,mBAQrBgI,EARqB,KAQRC,EARQ,OASAjI,mBAAS,IATT,mBASrBkI,EATqB,KASbC,EATa,OAUUnI,qBAVV,mBAUrBoI,EAVqB,KAURC,EAVQ,KAWtBC,EAAYC,uBAAY,SAACC,EAAOC,GAClC,IAAKL,EACD,OAAO,EAEX,GAAIA,EAAY5B,SAASgC,EAAMxC,SAAWoC,EAAY5B,SAASiC,EAAMzC,OACjE,OAAQ,EAEZ,IAAKoC,EAAY5B,SAASgC,EAAMxC,QAAUoC,EAAY5B,SAASiC,EAAMzC,OACjE,OAAO,EAEX,GAAIwC,EAAMtC,QAAQjB,SAAWwD,EAAMvC,QAAQjB,OACvC,OAAOwD,EAAMvC,QAAQjB,OAASuD,EAAMtC,QAAQjB,OAEhD,IAAIyD,EAAQF,EAAM3D,KACd2D,EAAMnE,gBACNqE,EAAQF,EAAMnE,cAAcQ,MAEhC,IAAI8D,EAAQF,EAAM5D,KAIlB,OAHI4D,EAAMpE,gBACNsE,EAAQF,EAAMpE,cAAcQ,MAEzB8D,EAAQD,IAChB,CAACN,IACJvH,qBAAU,WACDuD,EAAY6B,OACb5F,EAAQY,KAAK,yBAEjB6J,IACAhD,MACD,IACHjH,qBAAU,WACFkK,EAAoBnL,OACpB8H,EAASqD,EAAoBnL,KAAKoL,cAAcpC,MAAM,GAAGC,KAAKP,IAC9DL,EAAeR,MAEpB,CAACsD,EAAoBnL,OACxBiB,qBAAU,WACFkH,EAAkBnI,MAClByI,EAAeN,EAAkBnI,KAAKwI,YAAYU,KAAI,SAAA9E,GAAI,OAAIA,EAAKgC,YAExE,CAAC+B,EAAkBnI,OACtBmJ,YAAgBpG,GAAY,CACxBqG,mBAAoB,YAA2B,IACrCC,EADoC,EAAvBC,iBACctJ,KAAKuJ,UAChCC,EAAW3B,EAAM4B,OAAOJ,GAC9BG,EAASP,KAAKP,GACdZ,EAAS0B,MAGjBL,YAAgBzF,GAAe,CAC3B0F,mBAAoB,YAA2B,IAAxBE,EAAuB,EAAvBA,iBACbI,EAAaJ,EAAiBtJ,KAAK2J,aAAaC,QAChDlD,EAAY4C,EAAiBtJ,KAAK2J,aAAajD,UAC/C8C,EAAW3B,EAAMqB,KAAI,SAAA9E,GAAI,OAAIA,EAAKgC,QAAUM,EAAf,eAAgCtC,EAAhC,CAAsCK,cAAeiF,IAAetF,KACvGoF,EAASP,KAAKP,GACdZ,EAAS0B,MAGjBL,YAAgBnG,GAAe,CAC3BoG,mBAAoB,YAA2B,IACrCS,EADoC,EAAvBP,iBACmBtJ,KAAK8J,aACvCN,EAAW,IAEXA,EADA3B,EAAMqB,KAAI,SAAA9E,GAAI,OAAIA,EAAKgC,SAAOQ,SAASiD,EAAazD,OACzCyB,EAAMqB,KAAI,SAAA9E,GAAI,OAAIA,EAAKgC,QAAUyD,EAAazD,MAA5B,eAAyChC,EAAzC,CAA+CkC,QAASuD,EAAavD,UAAYlC,KAEnGyD,EAAM4B,OAAOI,IAEnBZ,KAAKP,GACdZ,EAAS0B,EAASlB,QAAO,SAAAlE,GAAI,OAAIA,EAAKkC,QAAQjB,OAAS,SAG/DpE,qBAAU,WAEFoH,EADW,KAAXC,EACeT,EAAMmB,MAAM,GAAGC,KAAKP,GAEpBb,EAAMS,QAAO,SAAAlE,GAAI,OAAIA,EAAKgC,MAAM2D,cAAcC,WAAW1B,EAAOyB,kBAAgBd,KAAKP,MAEzG,CAACJ,EAAQT,EAAOa,IAxFS,MAyFC9H,YAAYsC,GAAU,CAC/CrC,QAAS,SAACrB,GACNjB,EAASH,EAAgB,CAAEyB,QAASL,EAAMsB,cAAc,GAAGjB,QAASL,OAAO,GAAQ,QA3F/D,mBAyFrByK,EAzFqB,KAyFZC,EAzFY,OA8FKtJ,YAAYuC,GAAY,CACrDtC,QAAS,SAACrB,GACNjB,EAASH,EAAgB,CAAEyB,QAASL,EAAMsB,cAAc,GAAGjB,QAASL,OAAO,GAAQ,QAhG/D,mBA8FrB2K,EA9FqB,KA8FVC,EA9FU,KAmGtB9F,EAAY,SAACF,GACXoC,OAAOC,QAAQ,cACfwD,EAAQ,CAAEnI,UAAW,CAAE4E,UAAWtC,EAAKgC,UAG/CnF,qBAAU,WACFiJ,EAAUlK,OACVyI,EAAeD,EAAYiB,OAAOS,EAAUlK,KAAKiK,QAAQ7D,QACzD7H,EAASH,EAAgB,CAAEyB,QAAS,cAAeL,OAAO,GAAS,QAExE,CAAC0K,EAAUlK,OACd,IAAMuE,EAAc,SAACH,GACboC,OAAOC,QAAQ,gBACf0D,EAAU,CAAErI,UAAW,CAAE4E,UAAWtC,EAAKgC,UAGjDnF,qBAAU,WACFmJ,EAAYpK,OACZyI,EAAeD,EAAYF,QAAO,SAAA+B,GAAK,OAAIA,IAAUD,EAAYpK,KAAKmK,UAAU/D,UAChF7H,EAASH,EAAgB,CAAEyB,QAAS,gBAAiBL,OAAO,GAAS,QAE1E,CAAC4K,EAAYpK,OAChBmJ,YAAgBlG,GAAc,CAC1BmG,mBAAoB,YAA2B,IACrCkB,EADoC,EAAvBhB,iBACkBtJ,KAAKuK,YAC1CzC,EAASD,EAAMS,QAAO,SAAAlE,GAAI,OAAIA,EAAKnC,KAAOqI,EAAYrI,UAG9D,IASMuI,EAAc,CAAErL,MAAO,OAAQsL,cAAe,IAAKjJ,YAAa,QAElEgJ,EAAY/I,gBADH,UAATd,EAC8B,QAEA,WAElC,IAAM+J,EAAW,CAAErD,aAAc,IAAKC,YAAa,KACnD,OACI,yBAAKrI,MAAO,CAAE0I,OAAQ,SAClB,kBAACT,GAAA,EAAD,KACI,kBAACC,GAAA,EAAD,CAAKC,GAAG,IAAInI,MAAOyL,GACf,wBAAIzL,MAAO,CAAE0L,QAAS,eAAgBxE,aAAc,MAApD,mBAEJ,kBAACgB,GAAA,EAAD,CAAKC,GAAG,IAAInI,MAAOyL,GACf,2BAAOzL,MAAOuL,EAAa7L,KAAK,OAAOuC,MAAOoH,EAAQnG,SAAU,gBAAGC,EAAH,EAAGA,OAAH,OAAgBmG,EAAUnG,EAAOlB,QAAQuG,YAAY,+BAG7H,kBAACP,GAAA,EAAD,KACI,kBAACC,GAAA,EAAD,CAAKlI,MAAOyL,GACR,yBAAKzL,MA5BJ,CACb+G,YAAa,QACbC,aAAc,MACdzE,YAAa,OACb0E,QAAS,OACTC,aAAc,IACdyE,UAAW,SACXjD,OAAQ,WAsBSa,EACG,oCACKJ,EAAYc,KAAI,SAAA9E,GAAI,OACjB,kBAACyG,GAAD,CAAaC,IAAK1G,EAAKnC,GAAImC,KAAMA,EAAME,UAAWA,EAAWC,YAAaA,EAAaF,SAAUmE,EAAY5B,SAASxC,EAAKgC,aAInI,6C,iDCzHbiF,GA9CM,SAAC,GAA4B,IAA1BC,EAAyB,EAAzBA,SAAUC,EAAe,EAAfA,SACxBhN,EAAWe,cAD4B,EAErBc,oBAAS,GAFY,mBAEtCoL,EAFsC,KAEhCC,EAFgC,KAQ7C,OAAIH,GAAyB,KAAbA,EACRC,EAEI,oCACI,4BAAQpM,MAAM,MAAMwI,OAAO,MACvB+D,YAAY,IACZC,iBAAe,EACfvF,MAAM,QACNwF,IAAKN,IAET,8BAKJ,oCACI,kBAACO,GAAA,EAAD,CAAgBC,UAAU,MAAMC,MAAO,CAAEP,KAAM,IAAKQ,KAAM,KAAOC,QAC7D,kBAACC,GAAA,EAAD,yBAEA,kBAACC,GAAA,EAAD,CAAOP,IAAKN,EAAU1L,QAvBvB,WACf6L,GAAQ,GACRlN,EAASH,EAAgB,MAqBkCa,MAAO,CAAEmN,SAAU,MAAOC,UAAW,UAEpF,kBAACC,GAAA,EAAD,CAAOd,KAAMA,EAAMjF,KAAK,KAAKgG,OA1BzB,kBAAMd,GAAQ,KA2Bd,kBAACa,GAAA,EAAME,OAAP,CAAcC,aAAW,IACzB,kBAACH,GAAA,EAAMI,KAAP,CAAYzN,MAAO,CAAE0N,WAAY,SAAUzG,QAAS,IAAKhH,SAAU,WAAYkN,SAAU,cAAezE,OAAQ,OAAQgD,QAAS,UAC7H,kBAACwB,GAAA,EAAD,CAAOP,IAAKN,EAAUrM,MAAO,CAAEmN,SAAU,cAAezE,OAAQ,OAAQgD,QAAS,SAAWiC,OAAK,MAGzG,8BAMR,sCC2JGC,GAjMC,SAAC,GAAiB,IAAfjD,EAAc,EAAdA,QACTrL,EAAWe,cACXkF,EAAcxF,aAAY,SAAAH,GAAK,OAAIA,EAAMqB,QACzCS,EAAO3B,aAAY,SAAAH,GAAK,OAAIA,EAAM8B,QAHX,EAICP,mBAASwJ,EAAQxE,SAJlB,mBAItBA,EAJsB,KAIb0H,EAJa,OAKC1M,oBAAS,GALV,mBAKtB2M,EALsB,KAKbC,EALa,OAMG5M,mBAASwJ,EAAQ0B,UANpB,mBAMtBA,EANsB,KAMZ2B,EANY,KAO7BhM,qBAAU,WACD2I,EAAQ0B,UACT2B,EAAY,MAEjB,IAX0B,MAYSrM,YAAY+C,GAAgB,CAC9D9C,QAAS,SAACrB,GACNjB,EAASH,EAAgB,CAAEyB,QAASL,EAAMsB,cAAc,GAAGjB,QAASL,OAAO,GAAQ,QAd9D,mBAYtB0N,EAZsB,KAYPC,EAZO,OAiBKvM,YAAYiD,GAAc,CACxDhD,QAAS,SAACrB,GACNjB,EAASH,EAAgB,CAAEyB,QAASL,EAAMsB,cAAc,GAAGjB,QAASL,OAAO,GAAQ,QAnB9D,mBAiBtB4N,EAjBsB,KAiBTC,EAjBS,KA2B7BpM,qBAAU,WACFkM,EAAapH,QAAUoH,EAAarH,SACpCvH,EAASH,EAAgB,CAAEyB,QAAS,kBAAmBL,OAAO,GAAS,OAE5E,CAAC2N,IACJ,IAAIG,EAAe,qCACf1D,EAAQ1J,KAAKoL,WACbgC,EAAe,oCAAE,kBAACnB,GAAA,EAAD,CAAOlN,MAAO,CAAE0I,OAAQ,MAAOxI,MAAO,OAASyM,IAAKhC,EAAQ1J,KAAKoL,SAAUsB,OAAK,MAOrG3L,qBAAU,WACFoM,EAAWrN,OACXgN,GAAW,GACXzO,EAASH,EAAgB,CAAEyB,QAAS,iBAAkBL,OAAO,GAAS,QAE3E,CAAC6N,EAAWrN,OAYfiB,qBAAU,WACN6L,EAAWlD,EAAQxE,WACpB,CAACwE,IA5DyB,MA6DShJ,YAAYoD,GAAgB,CAC9DnD,QAAS,SAACrB,GACNjB,EAASH,EAAgB,CAAEyB,QAASL,EAAMsB,cAAc,GAAGjB,QAASL,OAAO,GAAQ,QA/D9D,mBA6DtB+N,EA7DsB,KA6DP9H,EA7DO,KAuE7BxE,qBAAU,WACFwE,EAAazF,MACbzB,EAASH,EAAgB,CAAEyB,QAAS,mBAAoBL,OAAO,GAAS,OAE7E,CAACiG,EAAazF,OA3EY,MA4EaY,YAAYqD,GAAkB,CACpEpD,QAAS,SAACrB,GACNjB,EAASH,EAAgB,CAAEyB,QAASL,EAAMsB,cAAc,GAAGjB,QAASL,OAAO,GAAQ,QA9E9D,mBA4EtBgO,EA5EsB,KA4EL7H,EA5EK,KAsF7B1E,qBAAU,WACF0E,EAAe3F,MACfzB,EAASH,EAAgB,CAAEyB,QAAS,qBAAsBL,OAAO,GAAS,OAE/E,CAACmG,EAAe3F,OA1FU,MA2FiBY,YAAYsD,GAAoB,CAC1ErD,QAAS,SAACrB,GACNjB,EAASH,EAAgB,CAAEyB,QAASL,EAAMsB,cAAc,GAAGjB,QAASL,OAAO,GAAQ,QA7F9D,mBA2FtBiO,EA3FsB,KA2FH5H,EA3FG,KAqG7B5E,qBAAU,WACF4E,EAAiBE,QAAUF,EAAiBC,SAC5CvH,EAASH,EAAgB,CAAEyB,QAAS,2BAA6BL,OAAO,GAAS,OAEtF,CAACqG,IACJ,IAMM6H,EAAkB,CACpBvO,MAAO,OACP8H,OAAQ,OACR0G,OAAQ,QAENC,EAAW,CAAEpM,YAAa,OAAQrC,MAAO,QAClC,UAATwB,GACA+M,EAAgBjM,gBAAkB,QAClCmM,EAASnM,gBAAkB,UAE3BiM,EAAgBjM,gBAAkB,WAClCmM,EAASnM,gBAAkB,YAE/B,IACMwD,EAAO,IAAIC,KAAK0E,EAAQ3E,MAAME,mBAAmB,GADvC,CAAER,QAAS,OAAQC,KAAM,UAAWC,MAAO,OAAQC,IAAK,UAAWC,KAAM,UAAWC,OAAQ,YAE5G,OACI,yBAAK/F,MAtBQ,CACb+G,YAAa,QACbC,aAAc,MACdC,QAAS,OACTC,aAAc,SAmBV,6BACKmH,EADL,IACmB,kBAAC,IAAD,CAAM/K,GAAE,iBAAYqH,EAAQ1J,KAAKG,WAAauJ,EAAQ1J,KAAKG,UAD9E,IACgG4E,EAC3FT,EAAY6B,MACT,iDAAauD,EAAQtD,QAAQjB,QAE7B,sCAGR,8BAAUmC,KAAK,IAAItG,MAAOkE,EAASyI,UAAWd,EAAS9N,MAAOyO,EAAiBvL,SAAU,gBAAGC,EAAH,EAAGA,OAAH,OAAgB0K,EAAW1K,EAAOlB,QAAQwG,MAAM,SACzI,kBAAC,GAAD,CAAc4D,SAAU1B,EAAQ0B,SAAUC,SAAU3B,EAAQ2B,WAC3DwB,EACG,oCACI,2BAAOpO,KAAK,OAAOM,MAAO2O,EAAUnG,YAAY,qBAAqBvG,MAAOoK,EAAUnJ,SAAU,gBAAGC,EAAH,EAAGA,OAAH,OAAgB6K,EAAY7K,EAAOlB,QAAQwG,MAAM,SAAe,8BAGpK,qCAEFlD,EAAYnE,WAAauJ,EAAQ1J,KAAKG,UAAcmE,EAAY6B,OAA8B,oBAApBuD,EAAQxE,QAShF,qCARA,oCACKwE,EAAQtD,QAAQM,SAASpC,EAAYvC,IAClC,kBAACK,EAAA,EAAD,CAAQ3D,KAAK,SAAS4H,KAAK,KAAK3G,QApE7B,WACf4G,OAAOC,QAAQ,sBACf+G,EAAgB,CAAE1L,UAAW,CAAEgM,UAAWlE,EAAQ3H,QAkEtC,YAEA,kBAACK,EAAA,EAAD,CAAQ3D,KAAK,SAAS4H,KAAK,KAAK3G,QArF/B,WACb4G,OAAOC,QAAQ,oBACf8G,EAAc,CAAEzL,UAAW,CAAEgM,UAAWlE,EAAQ3H,QAmFpC,WAMXuC,EAAY6B,MACT,oCACKuD,EAAQtD,QAAQjB,OAAS,EACtB,kBAAC/C,EAAA,EAAD,CAAQ3D,KAAK,SAAS4H,KAAK,KAAK3G,QAhE3B,WACjB4G,OAAOC,QAAQ,4BACfgH,EAAkB,CAAE3L,UAAW,CAAEgM,UAAWlE,EAAQ3H,QA8DxC,gBAEA,sCAIR,qCAEFuC,EAAYnE,WAAauJ,EAAQ1J,KAAKG,WAAYmE,EAAY6B,OAA+B,oBAApBuD,EAAQxE,QAmB/E,qCAlBA,oCACI,kBAAC9C,EAAA,EAAD,CAAQ3D,KAAK,SAAS4H,KAAK,KAAK3G,QApJ3B,WACb4G,OAAOC,QAAQ,oBACfyG,EAAc,CAAEpL,UAAW,CAAEgM,UAAWlE,EAAQ3H,QAkJxC,kBACC8K,EACG,oCACI,kBAACzK,EAAA,EAAD,CAAQ3D,KAAK,SAAS4H,KAAK,KAAK3G,QA9HpC,WAChBoN,GAAW,GACXC,EAAYrD,EAAQ0B,UACpBwB,EAAWlD,EAAQxE,WA2HC,gBACA,kBAAC9C,EAAA,EAAD,CAAQ3D,KAAK,SAAS4H,KAAK,KAAK3G,QA1IrC,WACX4G,OAAOC,QAAQ,kBACf2G,EAAY,CAAEtL,UAAW,CAAEgM,UAAWlE,EAAQ3H,GAAImD,QAASA,EAASkG,SAAUA,OAwI9D,gBAGJ,oCACM9G,EAAYnE,WAAauJ,EAAQ1J,KAAKG,SACpC,kBAACiC,EAAA,EAAD,CAAQ3D,KAAK,SAAS4H,KAAK,KAAK3G,QA/HvC,WACjBoN,GAAW,GACPpD,EAAQxE,QAAQ2I,SAAS,aACzBjB,EAAWlD,EAAQxE,QAAQE,UAAU,EAAGsE,EAAQxE,QAAQC,OAAS,MA4H7C,iBAEA,yCC3DjB2I,GA3Hc,WAAO,IAAD,EACC5N,mBAAS,IADV,mBACxB6N,EADwB,KACdC,EADc,KAEzBzN,EAAUC,cACVC,EAAO3B,aAAY,SAAAH,GAAK,OAAIA,EAAM8B,QAClC6D,EAAcxF,aAAY,SAAAH,GAAK,OAAIA,EAAMqB,QAJhB,EAKaE,mBAAS,IALtB,mBAKxB+N,EALwB,KAKRC,EALQ,OAMHhO,mBAAS,IANN,mBAMxBkI,EANwB,KAMhBC,EANgB,OAOQR,YAAatE,IAPrB,mBAOxB4K,EAPwB,KAOVC,EAPU,KAQzBC,EAAiBC,iBAAO,MARC,EASCpO,oBAAS,GATV,mBASxBqO,EATwB,KASdC,EATc,KAUzBC,EAAe,SAACC,EAAUC,GAC5B,OAAID,EAAStI,QAAQjB,SAAWwJ,EAASvI,QAAQjB,OACtCwJ,EAASvI,QAAQjB,OAASuJ,EAAStI,QAAQjB,OAE/CuJ,EAAS3J,KAAO4J,EAAS5J,MAE9B6J,EAAiB,WACnBP,EAAeQ,QAAQC,eAAe,CAAEC,SAAU,YAEtDhO,qBAAU,WACDuD,EAAY6B,OACb5F,EAAQY,KAAK,yBAEjBgN,MACD,IACHpN,qBAAU,WACFqN,EAAetO,OACf0O,GAAY,GACZR,EAAYI,EAAetO,KAAKkP,iBAAiBjG,KAAK0F,IACtDjQ,YAAW,WACPoQ,MACD,KACHpQ,YAAW,WACPoQ,MACD,QAER,CAACR,IACJrN,qBAAU,WACFwN,IACAK,IACAJ,GAAY,MAEjB,CAACP,IACJhF,YAAgBvF,GAAiB,CAC7BwF,mBAAoB,YAA2B,IACrC+F,EADoC,EAAvB7F,iBACqBtJ,KAAKoP,eAC7ClB,EAAYD,EAAS3F,QAAO,SAAAsB,GAAO,OAAIA,EAAQ3H,KAAOkN,EAAelN,UAG7EkH,YAAgBrF,GAAgB,CAC5BsF,mBAAoB,YAA2B,IACrCiG,EADoC,EAAvB/F,iBACoBtJ,KAAKsP,cAC5CpB,EAAYD,EAAS/E,KAAI,SAAAU,GAAO,OAAIA,EAAQ3H,KAAOoN,EAAcpN,GAA7B,eAAuC2H,EAAvC,CAAgDxE,QAASiK,EAAcjK,QAASkG,SAAU+D,EAAc/D,SAAUC,SAAU8D,EAAc9D,WAAa3B,SAGnM3I,qBAAU,WAEFmN,EADW,KAAX9F,EACkB2F,EAEAA,EAAS3F,QAAO,SAAAsB,GAAO,OAAIA,EAAQxE,QAAQ2E,cAAcnD,SAAS0B,EAAOyB,qBAEhG,CAACzB,EAAQ2F,IACZ9E,YAAgBpF,GAAkB,CAC9BqF,mBAAoB,YAA2B,IACrCmG,EADoC,EAAvBjG,iBACsBtJ,KAAKwP,gBAC1CC,EAAc,IAEdA,EADAxB,EAAS/E,KAAI,SAAAU,GAAO,OAAIA,EAAQ3H,MAAI2E,SAAS2I,EAAgBtN,IAC/CgM,EAAS/E,KAAI,SAAAU,GAAO,OAAIA,EAAQ3H,KAAOsN,EAAgBtN,GAA/B,eAAyC2H,EAAzC,CAAkDtD,QAASiJ,EAAgBjJ,UAAYsD,KAE/GqE,EAASxE,OAAO8F,IAEtBtG,KAAK0F,GACjBT,EAAYuB,EAAYnH,QAAO,SAAAsB,GAAO,OAAIA,EAAQtD,QAAQjB,OAAS,SAG3E,IAUMmF,EAAc,CAAErL,MAAO,OAAQsL,cAAe,IAAKjJ,YAAa,QAElEgJ,EAAY/I,gBADH,UAATd,EAC8B,QAEA,WAElC,IAAM+J,EAAW,CAAErD,aAAc,IAAKC,YAAa,KACnD,OACI,oCACI,kBAACJ,GAAA,EAAD,KACI,kBAACC,GAAA,EAAD,CAAKC,GAAG,IAAInI,MAAOyL,GACf,wBAAIzL,MAAO,CAAE0L,QAAS,eAAgBxE,aAAc,MAApD,sBAEJ,kBAACgB,GAAA,EAAD,CAAKC,GAAG,IAAInI,MAAOyL,GACf,2BAAOzL,MAAOuL,EAAa7L,KAAK,OAAOuC,MAAOoH,EAAQnG,SAAU,YAAiB,IAAdC,EAAa,EAAbA,OAC/DsM,GAAY,GACZnG,EAAUnG,EAAOlB,QAClBuG,YAAY,oCAGvB,kBAACP,GAAA,EAAD,KACI,kBAACC,GAAA,EAAD,CAAKlI,MAAOyL,GACR,yBAAKzL,MAhCJ,CACb+G,YAAa,QACbC,aAAc,MACdzE,YAAa,OACb0E,QAAS,OACTC,aAAc,IACdyE,UAAW,SACXjD,OAAQ,OACRxI,MAAO,SAyB8B,IAApB8O,EAAS5I,OACN,qDAEA8I,EAAejF,KAAI,SAAAU,GAAO,OACtB,kBAAC,GAAD,CAASkB,IAAKlB,EAAQ3H,GAAI2H,QAASA,OAG3C,yBAAK8F,IAAKnB,SC1EnBoB,GA1CK,SAAC,GAAe,IAAbvJ,EAAY,EAAZA,MAAY,EACDhG,mBAAS,IADR,mBACxBgF,EADwB,KACf0H,EADe,OAEC1M,mBAAS,IAFV,mBAExBkL,EAFwB,KAEd2B,EAFc,KAGzB1O,EAAWe,cACXqB,EAAO3B,aAAY,SAAAH,GAAK,OAAIA,EAAM8B,QAJT,EAKRC,YAAY4C,GAAgB,CAC/CoM,YAAa,WACT9C,EAAW,IACXG,EAAY,KAEhBpM,QAAS,SAACrB,GACNjB,EAASH,EAAgB,CAAEyB,QAASL,EAAMsB,cAAc,GAAGjB,QAASL,OAAO,GAAQ,QAX5D,mBAKxBqQ,EALwB,KAkBzBC,GAlByB,KAkBV,CAAE7I,OAAQ,OAAQzF,YAAa,SAC9CoM,EAAW,CAAEpM,YAAa,QAQhC,MAPa,UAATb,GACAmP,EAAarO,gBAAkB,QAC/BmM,EAASnM,gBAAkB,UAE3BqO,EAAarO,gBAAkB,WAC/BmM,EAASnM,gBAAkB,YAG3B,kBAACC,EAAA,EAAD,CAAMC,SAdK,SAACC,GACZA,EAAMC,iBACNgO,EAAK,CAAE/N,UAAW,CAAE4E,UAAWN,EAAOhB,UAASkG,gBAa3C,kBAACpE,GAAA,EAAD,CAAKX,KAAK,MACN,kBAACY,GAAA,EAAD,CAAKC,GAAG,KAAKnI,MAAO,CAAEoI,aAAc,IAAKC,YAAa,MAClD,kBAAC5F,EAAA,EAAKM,QAAN,CAAcuF,GAAG,WAAWC,KAAK,IAAIvI,MAAO6Q,EAAc7N,GAAG,UAAUf,MAAOkE,EAASlD,KAAK,UAAUC,SAAU,gBAAGC,EAAH,EAAGA,OAAH,OAAgB0K,EAAW1K,EAAOlB,QAAQuG,YAAY,iBAAiBpF,UAAQ,EAACqF,MAAM,SACtM,kBAAChG,EAAA,EAAKM,QAAN,CAAc/C,MAAO2O,EAAUrH,KAAK,KAAK5H,KAAK,OAAO8I,YAAY,qBAAqBvG,MAAOoK,EAAUpJ,KAAK,WAAWD,GAAG,WAAWE,SAAU,gBAAGC,EAAH,EAAGA,OAAH,OAAgB6K,EAAY7K,EAAOlB,QAAQwG,MAAM,UAEpM,kBAACP,GAAA,EAAD,CAAKC,GAAG,IAAInI,MAAO,CAAEqI,YAAa,IAAKD,aAAc,MACjD,kBAAC/E,EAAA,EAAD,CAAQrD,MAAO,CAAE0I,OAAQ,QAAU1F,GAAG,SAAStD,KAAK,SAAS4H,KAAK,KAAKmB,OAAK,GAA5E,YCkOLvD,GAjQF,SAAC,GAAe,IAAbiC,EAAY,EAAZA,MAAY,EACAhG,mBAAS,MADT,mBACjBgE,EADiB,KACX2L,EADW,OAEQ3P,mBAAS,IAFjB,mBAEjB6N,EAFiB,KAEPC,EAFO,KAGlBzN,EAAUC,cACVnC,EAAWe,cACXqB,EAAO3B,aAAY,SAAAH,GAAK,OAAIA,EAAM8B,QAClC6D,EAAcxF,aAAY,SAAAH,GAAK,OAAIA,EAAMqB,QANvB,EAOoBE,mBAAS,IAP7B,mBAOjB+N,EAPiB,KAODC,EAPC,OAQIhO,mBAAS,IARb,mBAQjBkI,EARiB,KAQTC,EARS,OASOR,YAAalF,IATpB,mBASjBmN,EATiB,KASPC,EATO,OAUqBlI,YAAajF,IAVlC,mBAUjBoF,EAViB,KAUAC,EAVA,OAWc/H,qBAXd,mBAWjBoI,EAXiB,KAWJC,EAXI,KAYlB8F,EAAiBC,iBAAO,MAZN,EAaQpO,oBAAS,GAbjB,mBAajBqO,EAbiB,KAaPC,EAbO,KAclBI,EAAiB,WACnBP,EAAeQ,QAAQC,eAAe,CAAEC,SAAU,YAEtDhO,qBAAU,WACN+O,EAAS,CAAElO,UAAW,CAAE4E,UAAWN,KACnC8B,MACD,IACHjH,qBAAU,WACN+O,EAAS,CAAElO,UAAW,CAAE4E,UAAWN,KACnC8B,MACD,CAAC9B,IACJnF,qBAAU,WACFgP,EAAWjQ,MACX0O,GAAY,GACZR,EAAY+B,EAAWjQ,KAAKoE,KAAK6J,SAAShF,MAAK,SAAC2F,EAAUC,GACtD,OAAOD,EAAS3J,KAAO4J,EAAS5J,SAEpC8K,EAAQE,EAAWjQ,KAAKoE,MACxB1F,YAAW,WACPoQ,MACD,KACHpQ,YAAW,WACPoQ,MACD,MACImB,EAAWlK,SAAWkK,EAAWnK,SACxCrF,EAAQY,KAAK,gCAElB,CAAC4O,IACJhP,qBAAU,WACFkH,EAAkBnI,MAClByI,EAAeN,EAAkBnI,KAAKwI,YAAYU,KAAI,SAAA9E,GAAI,OAAIA,EAAKgC,YAExE,CAAC+B,EAAkBnI,OACtBiB,qBAAU,WACFwN,IACAK,IACAJ,GAAY,MAEjB,CAACP,IACJhF,YAAgBzF,GAAe,CAC3B0F,mBAAoB,YAA2B,IAAxBE,EAAuB,EAAvBA,iBACbI,EAAaJ,EAAiBtJ,KAAK2J,aAAaC,QAEtD,GADkBN,EAAiBtJ,KAAK2J,aAAajD,YACnCN,EAAO,CACrBsI,GAAY,GACZ,IAAMe,EAAcxB,EAASxE,OAAOC,GACpC+F,EAAYxG,MAAK,SAAC2F,EAAUC,GACxB,OAAOD,EAAS3J,KAAO4J,EAAS5J,QAEpCiJ,EAAYuB,OAIxBtG,YAAgBvF,GAAiB,CAC7BwF,mBAAoB,YAA2B,IACrC+F,EADoC,EAAvB7F,iBACqBtJ,KAAKoP,eAC7ClB,EAAYD,EAAS/E,KAAI,SAAAU,GAAO,OAAIA,EAAQ3H,KAAOkN,EAAelN,GAA9B,eAAwC2H,EAAxC,CAAiDxE,QAAS+J,EAAe/J,QAASkG,SAAU6D,EAAe7D,SAAUhF,QAAS6I,EAAe7I,UAAYsD,SAGrMT,YAAgBrF,GAAgB,CAC5BsF,mBAAoB,YAA2B,IACrCiG,EADoC,EAAvB/F,iBACoBtJ,KAAKsP,cAC5CpB,EAAYD,EAAS/E,KAAI,SAAAU,GAAO,OAAIA,EAAQ3H,KAAOoN,EAAcpN,GAA7B,eAAuC2H,EAAvC,CAAgDxE,QAASiK,EAAcjK,QAASkG,SAAU+D,EAAc/D,SAAUC,SAAU8D,EAAc9D,WAAa3B,SAGnM3I,qBAAU,WAEFmN,EADW,KAAX9F,EACkB2F,EAEAA,EAAS3F,QAAO,SAAAsB,GAAO,OAAIA,EAAQxE,QAAQ2E,cAAcnD,SAAS0B,EAAOyB,qBAEhG,CAACzB,EAAQ2F,IArFY,MAsFWrN,YAAYwC,GAAa,CACxDvC,QAAS,SAACrB,GACNjB,EAASH,EAAgB,CAAEyB,QAASL,EAAMsB,cAAc,GAAGjB,QAASL,OAAO,GAAQ,QAxFnE,mBAsFjBgG,EAtFiB,KAsFLC,GAtFK,KAgGxBxE,qBAAU,WACFwE,GAAazF,MACbzB,EAASH,EAAgB,CAAEyB,QAAS,gBAAiBL,OAAO,GAAS,OAE1E,CAACiG,GAAazF,OApGO,OAqGeY,YAAYyC,GAAe,CAC9DxC,QAAS,SAACrB,GACNjB,EAASH,EAAgB,CAAEyB,QAASL,EAAMsB,cAAc,GAAGjB,QAASL,OAAO,GAAQ,QAvGnE,qBAqGjBkG,GArGiB,MAqGHC,GArGG,MA+GxB1E,qBAAU,WACF0E,GAAe3F,MACfzB,EAASH,EAAgB,CAAEyB,QAAS,kBAAmBL,OAAO,GAAS,OAE5E,CAACmG,GAAe3F,OAnHK,OAoHmBY,YAAY0C,GAAiB,CACpEzC,QAAS,SAACrB,GACNjB,EAASH,EAAgB,CAAEyB,QAASL,EAAMsB,cAAc,GAAGjB,QAASL,OAAO,GAAQ,QAtHnE,qBAoHjBoG,GApHiB,MAoHDC,GApHC,MA8HxB5E,qBAAU,WACF4E,GAAiB7F,MACjBzB,EAASH,EAAgB,CAAEyB,QAAS,wBAA0BL,OAAO,GAAS,OAEnF,CAACqG,GAAiB7F,OACrBmJ,YAAgBnG,GAAe,CAC3BoG,mBAAoB,YAA2B,IACrCS,EADoC,EAAvBP,iBACmBtJ,KAAK8J,aACvCD,EAAazD,QAAUA,GACvB2J,EAAQlG,MAvII,OA2IKjJ,YAAYsC,GAAU,CAC/CrC,QAAS,SAACrB,GACNjB,EAASH,EAAgB,CAAEyB,QAASL,EAAMsB,cAAc,GAAGjB,QAASL,OAAO,GAAQ,QA7InE,qBA2IjByK,GA3IiB,MA2IRC,GA3IQ,SAgJStJ,YAAYuC,GAAY,CACrDtC,QAAS,SAACrB,GACNjB,EAASH,EAAgB,CAAEyB,QAASL,EAAMsB,cAAc,GAAGjB,QAASL,OAAO,GAAQ,QAlJnE,qBAgJjB2K,GAhJiB,MAgJNC,GAhJM,MA0JxBnJ,qBAAU,WACFiJ,GAAUlK,OACVyI,EAAeD,EAAYiB,OAAOS,GAAUlK,KAAKiK,QAAQ7D,QACzD7H,EAASH,EAAgB,CAAEyB,QAAS,cAAeL,OAAO,GAAS,QAExE,CAAC0K,GAAUlK,OAMdiB,qBAAU,WACFmJ,GAAYpK,OACZyI,EAAeD,EAAYF,QAAO,SAAA+B,GAAK,OAAIA,IAAUD,GAAYpK,KAAKmK,UAAU/D,UAChF7H,EAASH,EAAgB,CAAEyB,QAAS,gBAAiBL,OAAO,GAAS,QAE1E,CAAC4K,GAAYpK,OAChBmJ,YAAgBpF,GAAkB,CAC9BqF,mBAAoB,YAA2B,IACrCmG,EADoC,EAAvBjG,iBACsBtJ,KAAKwP,gBACxCC,EAAcxB,EAAS/E,KAAI,SAAAU,GAAO,OAAIA,EAAQ3H,KAAOsN,EAAgBtN,GAA/B,eAAyC2H,EAAzC,CAAkDtD,QAASiJ,EAAgBjJ,UAAYsD,KACnIsE,EAAYuB,MAGpB,IAUMjF,GAAc,CAAErL,MAAO,OAAQsL,cAAe,IAAKjJ,YAAa,OAAQ6F,aAAc,IAAKC,YAAa,KAE1GkD,GAAY/I,gBADH,UAATd,EAC8B,QAEA,WAElC,IAAM+J,GAAW,CAAErD,aAAc,IAAKC,YAAa,KACnD,OACI,oCACI,kBAACJ,GAAA,EAAD,KACI,kBAACC,GAAA,EAAD,CAAKC,GAAG,IAAInI,MAAOyL,IACdtE,EAAM4D,WAAW,YACd,wBAAI/K,MAAO,CAAE0L,QAAS,eAAgBxE,aAAc,MAApD,UAA+DC,EAAMd,UAAU,GAA/E,YAEA,wBAAIrG,MAAO,CAAE0L,QAAS,eAAgBxE,aAAc,MAC/CC,EADL,OAEKoC,GAAeA,EAAY5B,SAASR,GACjC,kBAAC9D,EAAA,EAAD,CAAQ3D,KAAK,SAAS4H,KAAK,KAAK3G,QA7CxC,WACZ4G,OAAOC,QAAQ,gBACf0D,GAAU,CAAErI,UAAW,CAAE4E,UAAWN,OA2ChB,SAEA,kBAAC9D,EAAA,EAAD,CAAQ3D,KAAK,SAAS4H,KAAK,KAAK3G,QA1D1C,WACV4G,OAAOC,QAAQ,cACfwD,GAAQ,CAAEnI,UAAW,CAAE4E,UAAWN,OAwDd,OAEH5B,EAAY6B,MACT,oCACKjC,GAAQA,EAAKkC,QAAQjB,OAAS,EAC3B,oCACI,kBAAC/C,EAAA,EAAD,CAAQ3D,KAAK,SAAS4H,KAAK,KAAK3G,QA5F/C,WACjB4G,OAAOC,QAAQ,yBACfb,GAAe,CAAE9D,UAAW,CAAE4E,UAAWN,OA0FT,gBADJ,IACqF,0BAAMnH,MAAO,CAAEiR,SAAU,SAAzB,aAA8C9L,EAAKkC,QAAQjB,SAGhJ,sCAIR,oCACKjB,GAAQA,EAAKkC,SAAWlC,EAAKkC,QAAQM,SAASpC,EAAYvC,IACvD,kBAACK,EAAA,EAAD,CAAQ3D,KAAK,SAAS4H,KAAK,KAAK3G,QApH7C,WACf4G,OAAOC,QAAQ,mBACff,GAAa,CAAE5D,UAAW,CAAE4E,UAAWN,OAkHX,YAEA,kBAAC9D,EAAA,EAAD,CAAQ3D,KAAK,SAAS4H,KAAK,KAAK3G,QArI/C,WACb4G,OAAOC,QAAQ,iBACfjB,EAAW,CAAE1D,UAAW,CAAE4E,UAAWN,OAmIT,aAOxB,kBAACe,GAAA,EAAD,CAAKC,GAAG,IAAInI,MAAOyL,IACf,2BAAOzL,MAAOuL,GAAa7L,KAAK,OAAOuC,MAAOoH,EAAQnG,SAAU,YAAiB,IAAdC,EAAa,EAAbA,OAC/DsM,GAAY,GACZnG,EAAUnG,EAAOlB,QAClBuG,YAAY,oCAGvB,kBAACP,GAAA,EAAD,KACI,kBAACC,GAAA,EAAD,CAAKlI,MAAOyL,IACR,yBAAKzL,MA9DJ,CACb+G,YAAa,QACbC,aAAc,MACdzE,YAAa,OACb0E,QAAS,OACTC,aAAc,IACdyE,UAAW,SACXjD,OAAQ,OACRxI,MAAO,SAuD8B,IAApB8O,EAAS5I,OACN,gDAEA8I,EAAejF,KAAI,SAAAU,GAAO,OACtB,kBAAC,GAAD,CAASkB,IAAKlB,EAAQ3H,GAAI2H,QAASA,OAG3C,yBAAK8F,IAAKnB,OAItB,kBAAC,GAAD,CAAanI,MAAOA,MCzPjB+J,GAVE,WACb,IAAMC,EAAQC,YAAc,iBACtBjK,EAAQgK,EAAQA,EAAME,OAAOlK,MAAQ,KAC3C,OACI,6BACI,kBAAC,GAAD,CAAMA,MAAOA,MC0HVmK,GAtHK,WAChB,IAAMhS,EAAWe,cACXmB,EAAUC,cACV8D,EAAcxF,aAAY,SAAAH,GAAK,OAAIA,EAAMqB,QACzCkQ,EAAQC,YAAc,oBAJN,EAKEjQ,mBAAS,MALX,mBAKfF,EALe,KAKTD,EALS,OAMUG,mBAAS,IANnB,mBAMfkL,EANe,KAML2B,EANK,OAOkB7M,oBAAS,GAP3B,mBAOfoQ,EAPe,KAODC,EAPC,KAQhBpQ,EAAW+P,EAAQA,EAAME,OAAOjQ,SAAW,KAR3B,EASS0H,YAAa9J,GATtB,mBASfyS,EATe,KASLC,EATK,OAUIvQ,mBAAS,sCAVb,mBAUfwQ,EAVe,KAURC,EAVQ,KAWtB5P,qBAAU,WACNyP,EAAS,CAAE5O,UAAW,CAAEzB,gBACzB,CAACA,IACJY,qBAAU,WACF0P,EAAW3Q,KACXC,EAAQ0Q,EAAW3Q,KAAKE,MACjByQ,EAAW5K,SAAW4K,EAAW7K,SACxCrF,EAAQY,KAAK,gCAElB,CAACsP,IApBkB,MAqBoB/P,YAAY1C,EAAgB,CAClE2C,QAAS,SAACrB,GACNjB,EAASH,EAAgB,CAAEyB,QAASL,EAAMsB,cAAc,GAAGjB,QAASL,OAAO,GAAQ,QAvBrE,mBAqBfsR,EArBe,KAqBAC,EArBA,KA+BtB9P,qBAAU,WACF8P,EAAiB/Q,OACjBzB,EAASH,EAAgB,CAAEyB,QAAS,sBAAuBL,OAAO,GAAS,KAC3ES,EAAQ,eAAKC,EAAN,CAAYoL,SAAUyF,EAAiB/Q,KAAKgR,kBAAkB1F,YACrE2B,EAAY,IACZwD,GAAgB,MAErB,CAACM,EAAiB/Q,OAtCC,MAuC6BY,YAAYzC,EAAmB,CAC9E0C,QAAS,SAACrB,GACNjB,EAASH,EAAgB,CAAEyB,QAASL,EAAMsB,cAAc,GAAGjB,QAASL,OAAO,GAAQ,QAzCrE,mBAuCfyR,EAvCe,KAuCGC,EAvCH,KAiDtBjQ,qBAAU,WACFiQ,EAAuBlR,OACvBzB,EAASH,EAAgB,CAAEyB,QAAS,0BAA2BL,OAAO,GAAS,KAC/ES,EAAQ,eAAKC,EAAN,CAAYoL,SAAU,QAC7B2B,EAAY,IACZwD,GAAgB,GAChBI,EAAS,yCAEd,CAACK,EAAuBlR,OAU3B,OALAiB,qBAAU,WACFf,GAAQA,EAAKoL,UACbuF,EAAS,oCAAE,kBAAC1E,GAAA,EAAD,CAAOlN,MAAO,CAAE0I,OAAQ,OAAQxI,MAAO,QAAUyM,IAAK1L,EAAKoL,SAAUsB,OAAK,IAAS,iCAEnG,CAAC1M,IAEA,oCACKA,EACG,kBAACgH,GAAA,EAAD,KACI,kBAACC,GAAA,EAAD,CAAKC,GAAG,KACJ,kBAACF,GAAA,EAAD,KACI,6BAAM0J,IAEV,kBAAC1J,GAAA,EAAD,KACI,4BAAKhH,EAAKG,WAEd,kBAAC6G,GAAA,EAAD,KACKhH,EAAKG,WAAamE,EAAYnE,SAC3B,oCACKmQ,EACG,oCACI,kBAACtJ,GAAA,EAAD,KACI,2BAAOvI,KAAK,OAAO8I,YAAY,sBAAsBvG,MAAOoK,EAAUnJ,SAAU,gBAAGC,EAAH,EAAGA,OAAH,OAAgB6K,EAAY7K,EAAOlB,WAEvH,kBAACgG,GAAA,EAAD,KACI,kBAAC5E,EAAA,EAAD,CAAQ3D,KAAK,SAAS4H,KAAK,KAAK3G,QA7BxD,WAChB6Q,GAAgB,GAChBxD,EAAY,MA2B4B,QACC/M,EAAKoL,SACF,kBAAChJ,EAAA,EAAD,CAAQ3D,KAAK,SAAS4H,KAAK,KAAK3G,QA7CtD,WAClB4G,OAAOC,QAAQ,4BACfwK,MA2CwC,gBAEA,qCAEJ,kBAAC3O,EAAA,EAAD,CAAQ3D,KAAK,SAAS4H,KAAK,KAAK3G,QAnErD,WACf4G,OAAOC,QAAQ,yBACfqK,EAAc,CAAEhP,UAAW,CAAEwJ,gBAiEO,kBAIR,kBAAChJ,EAAA,EAAD,CAAQ3D,KAAK,SAAS4H,KAAK,KAAK3G,QAAS,kBAAM6Q,GAAgB,KAA/D,cAIR,uCAIZ,kBAACtJ,GAAA,EAAD,CAAKC,GAAG,KACJ,6BACI,kBAAC,GAAD,CAAMhB,MAAK,kBAAa/F,QAKpC,uCCjHD8Q,GATG,WACd,IAAMf,EAAQC,YAAc,wBACtBe,EAAehB,EAAQA,EAAME,OAAOc,aAAe,KAEzD,OACI,4BAAKA,I,UCoCEC,GAjCM,WACjB,OACI,kBAACC,GAAA,EAAD,CAAWrS,MAAO,CAAE0I,OAAQ,SACxB,kBAAC,IAAD,KACI,kBAAC,IAAD,CAAO4J,KAAK,wBACR,kBAAC,GAAD,OAEJ,kBAAC,IAAD,CAAOA,KAAK,mBACR,kBAAC,GAAD,OAEJ,kBAAC,IAAD,CAAOA,KAAK,sBACR,kBAAC,GAAD,OAEJ,kBAAC,IAAD,CAAOA,KAAK,iBACR,kBAAC,GAAD,OAEJ,kBAAC,IAAD,CAAOA,KAAK,UACR,kBAAC,GAAD,OAEJ,kBAAC,IAAD,CAAOA,KAAK,gBACR,kBAACC,GAAD,OAEJ,kBAAC,IAAD,CAAOD,KAAK,oBACR,kBAAC,GAAD,OAEJ,kBAAC,IAAD,CAAOA,KAAK,KACR,kBAAC,IAAD,CAAUhP,GAAG,eC0BlBkP,GApDI,WAAO,IAAD,EACWrR,mBAAS,IADpB,mBACdC,EADc,KACJC,EADI,OAEWF,mBAAS,IAFpB,mBAEdG,EAFc,KAEJC,EAFI,KAGfjC,EAAWe,cACXmB,EAAUC,cACVC,EAAO3B,aAAY,SAAAH,GAAK,OAAIA,EAAM8B,QALnB,EAMIC,YAAY5C,EAAQ,CACzC6C,QAAS,SAACrB,GACNjB,EAASH,EAAgB,CAAEyB,QAASL,EAAMsB,cAAc,GAAGjB,QAASL,OAAO,GAAQ,QARtE,mBAMdkS,EANc,KAMN1Q,EANM,KAWrBC,qBAAU,WACN,GAAID,EAAOhB,KAAM,CACb,IAAMD,EAAQiB,EAAOhB,KAAK2R,WAAWzQ,MAC/BhB,EAAOc,EAAOhB,KAAK2R,WAAWzR,KACpC3B,EAASuB,EAASC,IAClBoB,aAAaC,QAAQ,aAAcrB,GACnCU,EAAQY,KAAK,KACbF,aAAaC,QAAQ,cAAeE,KAAKC,UAAUrB,IACnD3B,EAAS0B,EAAQC,IACjB3B,EAASH,EAAgB,CAAEyB,QAAS,YAAaL,OAAO,GAAS,QAEtE,CAACwB,EAAOhB,OACX,IAMMf,EAAQ,CAAEuC,YAAa,QAM7B,OAJIvC,EAAMwC,gBADG,UAATd,EACwB,QAEA,WAGxB,oCACI,kBAAC,EAAD,MACA,yBAAKhB,UAAU,aACX,uCACA,kBAAC+B,EAAA,EAAD,CAAMC,SAjBH,SAACC,GACZA,EAAMC,iBACN6P,EAAO,CAAE5P,UAAW,CAAEzB,WAAUE,cAChCD,EAAY,IACZE,EAAY,MAcA,kBAACkB,EAAA,EAAKK,MAAN,kBACA,kBAACL,EAAA,EAAKM,QAAN,CAAcrD,KAAK,OAAOsD,GAAG,WAAWhD,MAAOA,EAAOiC,MAAOb,EAAU6B,KAAK,WAAWC,SAAU,gBAAGC,EAAH,EAAGA,OAAH,OAAgB9B,EAAY8B,EAAOlB,QAAQmB,UAAQ,IACpJ,kBAACX,EAAA,EAAKK,MAAN,kBACA,kBAACL,EAAA,EAAKM,QAAN,CAAcrD,KAAK,WAAWsD,GAAG,WAAWhD,MAAOA,EAAOiC,MAAOX,EAAU2B,KAAK,WAAWC,SAAU,gBAAGC,EAAH,EAAGA,OAAH,OAAgB5B,EAAY4B,EAAOlB,QAAQmB,UAAQ,IACxJ,kBAACC,EAAA,EAAD,CAAQL,GAAG,SAAStD,KAAK,UAAzB,WALJ,OAK0D,kBAAC,IAAD,CAAM4D,GAAG,UAAT,a,oBC9C7DqP,GAAU,SAACjR,GACpB,8CAAO,WAAMpC,GAAN,SAAAC,EAAA,sDACHD,EAAS,CACLI,KAAM,WACNqB,KAAMW,IAHP,2CAAP,mDAAM,IAQK/B,GAnBC,WAA8B,IAA7BC,EAA4B,uDAApB,QAASC,EAAW,uCACzC,OAAQA,EAAOH,MACX,IAAK,WAED,OADAwC,aAAaC,QAAQ,OAAQtC,EAAOkB,MAC7BlB,EAAOkB,KAElB,QAAS,OAAOnB,IC8GTgT,GA1GO,WAClB,IAAMrN,EAAcxF,aAAY,SAAAH,GAAK,OAAIA,EAAMqB,QACzCS,EAAO3B,aAAY,SAAAH,GAAK,OAAIA,EAAM8B,QAClCpC,EAAWe,cACXmB,EAAUC,cACVoR,EAAe,WACjBtL,OAAOrF,aAAa4Q,WAAW,cAC/BvL,OAAOrF,aAAa4Q,WAAW,eAC/BxT,EAAS0B,EAAQ,OACjB1B,EAASuB,EAAS,KAClBvB,EAASH,EAAgB,CAAEyB,QAAS,aAAcL,OAAO,GAAS,IAClEiB,EAAQY,KAAK,WAEjB,OAAImD,EACIA,EAAY6B,MAER,oCACI,kBAAC2L,GAAA,EAAD,CAAQC,kBAAgB,EAACC,OAAO,KAAKC,GAAG,OAAOzS,QAAQ,QACnD,kBAACsS,GAAA,EAAOI,MAAR,CAAcC,KAAK,GAAG9K,GAAG,QAAzB,aACA,kBAAC+K,GAAA,EAAD,CAAK3S,UAAU,WACX,kBAAC2S,GAAA,EAAIC,KAAL,CAAUF,KAAK,IAAI9K,GAAG,OAAOtI,MAAO,CAAEqI,YAAa,IAAKD,aAAc,MACxD,UAAT1G,EACG,kBAAC2B,EAAA,EAAD,CAAQ5C,QAAQ,eAAeE,QAAS,kBAAMrB,EAASqT,GAAQ,WAA/D,aAEA,kBAACtP,EAAA,EAAD,CAAQ5C,QAAQ,eAAeE,QAAS,kBAAMrB,EAASqT,GAAQ,YAA/D,gBAIZ,kBAACI,GAAA,EAAOQ,SAAR,CAAiBvQ,GAAG,yBAChB,kBAACqQ,GAAA,EAAD,CAAK3S,UAAU,WACX,kBAAC2S,GAAA,EAAIC,KAAL,CAAUF,KAAK,IAAI9K,GAAG,OAAOtI,MAAO,CAAEqI,YAAa,IAAKD,aAAc,MAClE,kBAAC/E,EAAA,EAAD,CAAQ5C,QAAQ,eAAeE,QAAS,WAAQa,EAAQY,KAAK,YAA7D,SACA,kBAACiB,EAAA,EAAD,CAAQ5C,QAAQ,eAAeE,QAAS,WAAQa,EAAQY,KAAK,kBAA7D,gBACA,kBAACiB,EAAA,EAAD,CAAQ5C,QAAQ,eAAeE,QAAS,WAAQa,EAAQY,KAAK,qBAA7D,kBACA,kBAACiB,EAAA,EAAD,CAAQ5C,QAAQ,eAAeE,QAAS,WAAQa,EAAQY,KAAK,wBAA7D,wBAIZ,kBAACiR,GAAA,EAAD,CAAK3S,UAAU,WACX,kBAAC2S,GAAA,EAAIC,KAAL,CAAUF,KAAK,IAAI9K,GAAG,QAClB,kBAACyK,GAAA,EAAOS,KAAR,CAAaxT,MAAO,CAAEiH,QAAS,MAC3B,kBAAC,IAAD,CAAM3D,GAAE,iBAAYiC,EAAYnE,WAAamE,EAAYnE,UAD7D,cACwF,kBAACiC,EAAA,EAAD,CAAQ5C,QAAQ,eAAeE,QAASkS,GAAxC,UAAqE,kBAACE,GAAA,EAAOU,OAAR,CAAeC,gBAAc,8BAKtM,kBAAC,EAAD,OAKJ,oCACI,kBAACX,GAAA,EAAD,CAAQC,kBAAgB,EAACC,OAAO,KAAKC,GAAG,OAAOzS,QAAQ,QACnD,kBAACsS,GAAA,EAAOI,MAAR,CAAcC,KAAK,GAAG9K,GAAG,QAAzB,aACA,kBAAC+K,GAAA,EAAD,CAAK3S,UAAU,WACX,kBAAC2S,GAAA,EAAIC,KAAL,CAAUF,KAAK,IAAI9K,GAAG,OAAOtI,MAAO,CAAEqI,YAAa,IAAKD,aAAc,MACxD,UAAT1G,EACG,kBAAC2B,EAAA,EAAD,CAAQ5C,QAAQ,eAAeE,QAAS,kBAAMrB,EAASqT,GAAQ,WAA/D,aAEA,kBAACtP,EAAA,EAAD,CAAQ5C,QAAQ,eAAeE,QAAS,kBAAMrB,EAASqT,GAAQ,YAA/D,gBAIZ,kBAACI,GAAA,EAAOQ,SAAR,CAAiBvQ,GAAG,yBAChB,kBAACqQ,GAAA,EAAD,CAAK3S,UAAU,WACX,kBAAC2S,GAAA,EAAIC,KAAL,CAAUF,KAAK,IAAI9K,GAAG,OAAOtI,MAAO,CAAEqI,YAAa,IAAKD,aAAc,MAClE,kBAAC/E,EAAA,EAAD,CAAQ5C,QAAQ,eAAeE,QAAS,WAAQa,EAAQY,KAAK,YAA7D,SACA,kBAACiB,EAAA,EAAD,CAAQ5C,QAAQ,eAAeE,QAAS,WAAQa,EAAQY,KAAK,kBAA7D,mBAIZ,kBAACiR,GAAA,EAAD,CAAK3S,UAAU,WACX,kBAAC2S,GAAA,EAAIC,KAAL,CAAUF,KAAK,IAAI9K,GAAG,QAClB,kBAACyK,GAAA,EAAOS,KAAR,CAAaxT,MAAO,CAAEiH,QAAS,MAC3B,kBAAC,IAAD,CAAM3D,GAAE,iBAAYiC,EAAYnE,WAAamE,EAAYnE,UAD7D,cACwF,kBAACiC,EAAA,EAAD,CAAQ5C,QAAQ,eAAeE,QAASkS,GAAxC,UAAqE,kBAACE,GAAA,EAAOU,OAAR,CAAeC,gBAAc,8BAKtM,kBAAC,EAAD,OAMR,oCACI,kBAACX,GAAA,EAAD,CAAQC,kBAAgB,EAACE,GAAG,OAAOzS,QAAQ,QACvC,kBAACsS,GAAA,EAAOI,MAAR,CAAcC,KAAK,GAAG9K,GAAG,QAAzB,aACA,kBAACyK,GAAA,EAAOQ,SAAR,CAAiBvQ,GAAG,yBAChB,kBAACqQ,GAAA,EAAD,CAAK3S,UAAU,WACX,kBAAC2S,GAAA,EAAIC,KAAL,CAAUF,KAAK,IAAI9K,GAAG,QACR,UAAT5G,EACG,kBAAC2B,EAAA,EAAD,CAAQ5C,QAAQ,eAAeE,QAAS,kBAAMrB,EAASqT,GAAQ,WAA/D,aAEA,kBAACtP,EAAA,EAAD,CAAQ5C,QAAQ,eAAeE,QAAS,kBAAMrB,EAASqT,GAAQ,YAA/D,kBAMpB,kBAAC,EAAD,QCtDDgB,GAhDH,WACR,IAAM7S,EAAQf,aAAY,SAAAH,GAAK,OAAIA,EAAMkB,SACnCY,EAAO3B,aAAY,SAAAH,GAAK,OAAIA,EAAM8B,QAcxC,OALIkS,SAASC,KAAK7T,MAAMwC,gBADX,UAATd,EACsC,QAGA,WAGtC,yBAAK1B,MAdK,CACVE,MAAO,OACPwI,OAAQ,OACRoL,KAAM,EACNC,IAAK,EACL3T,OAAQ,KAUJ,kBAAC,GAAD,MACA,kBAAC,IAAD,KACI,kBAAC,IAAD,CAAOkS,KAAK,WACPxR,EACG,kBAAC,IAAD,CAAUwC,GAAG,WAEb,kBAAC,GAAD,OAGR,kBAAC,IAAD,CAAOgP,KAAK,UACPxR,EACG,kBAAC,IAAD,CAAUwC,GAAG,WAEb,kBAAC,EAAD,OAGR,kBAAC,IAAD,CAAOgP,KAAK,KACPxR,EACG,oCACI,kBAAC,GAAD,OAGJ,kBAAC,IAAD,CAAUwC,GAAG,e,yGCxC/B3D,GAAUqU,2BAAgB,CAC5B5U,aAAc6U,EACdhT,KAAMiT,EACNpT,MAAOqT,EACPzS,KAAM0S,KAQKC,GALDC,uBACV3U,GACA4U,+BAAoBC,2BAAgBC,QnBJlCC,GAAWC,cAAW,SAACC,EAAD,GAAqB,IAAfC,EAAc,EAAdA,QACxB/T,EAAQoB,aAAa4S,QAAQ,cACnC,MAAO,CACHD,QAAQ,eACDA,EADA,CAEHE,cAAejU,EAAK,iBAAaA,GAAU,WAkBjDkU,GAAW,IAAIC,KAAS,CAAEC,IAAK,aAIjC5Q,GADAiD,OAAO4N,SAASC,KAAKzN,SAAS,aACrB,IAAI0N,KAAc,CACvBH,IAAI,QAAD,OAAU3N,OAAO4N,SAASC,KAA1B,YACH3P,QAAS,CAAE6P,WAAW,KAGjB,IAAID,KAAc,CACvBH,IAAI,SAAD,OAAW3N,OAAO4N,SAASC,KAA3B,YACH3P,QAAS,CAAE6P,WAAW,KAG9B,IAAMC,GAAYC,cAAM,YAAgB,IAAbC,EAAY,EAAZA,MACjBC,EAAaC,aAAkBF,GACrC,MAA4B,wBAApBC,EAAWE,MAA2D,iBAAzBF,EAAWG,YACjEvR,GAAQoQ,GAASlK,OAAOwK,KAErBc,GAAS,IAAIC,KAAa,CAC5BC,MAAO,IAAIC,KACXC,KAAMX,GACNY,eAlCmB,CACnBC,WAAY,CACRC,YAAa,YAEjBZ,MAAO,CACHY,YAAa,YAEjBC,SAAU,CACND,YAAa,eAgCfE,GAAcrU,aAAa4S,QAAQ,cACnC0B,GAAatU,aAAa4S,QAAQ,eAClCpT,GAAOQ,aAAa4S,QAAQ,QAC9ByB,IACAlC,GAAM/U,SAASuB,EAAS0V,KAExBC,IACAnC,GAAM/U,SAAS0B,EAAQqB,KAAKoU,MAAMD,MAElC9U,GACA2S,GAAM/U,SAASqT,GAAQjR,KAEvB2S,GAAM/U,SAASqT,GAAQ,UAE3B+D,IAASC,OAAO,kBAACC,GAAA,EAAD,CAAgBd,OAAQA,IAAQ,kBAAC,IAAD,CAAUzB,MAAOA,IAAO,kBAAC,IAAD,KAAQ,kBAAC,GAAD,SAA8CT,SAASiD,eAAe,W","file":"static/js/main.d9e052b0.chunk.js","sourcesContent":["import { gql } from '@apollo/client'\r\n\r\nexport const LOGIN = gql`\r\n    mutation login($username: String!, $password: String!) {\r\n        login(username: $username, password: $password)  {\r\n            value\r\n            user {\r\n                id\r\n                username\r\n                pinnedChats {\r\n                    title\r\n                }\r\n                admin\r\n            }\r\n        }\r\n    }\r\n`\r\n\r\nexport const SIGNIN = gql`\r\n    mutation createUser($username: String!, $password: String!) {\r\n        createUser(username: $username, password: $password)  {\r\n            value\r\n            user {\r\n                id\r\n                username\r\n                pinnedChats {\r\n                    title\r\n                }\r\n                admin\r\n            }\r\n        }\r\n    }\r\n`\r\n\r\nexport const USER = gql`\r\n    query user($username: String!) {\r\n        user(username: $username)  {\r\n            username\r\n            imageUrl\r\n        }\r\n    }\r\n`\r\n\r\nexport const SET_PROFILEPIC = gql`\r\nmutation setUserProfilePic($imageUrl: String!) {\r\n    setUserProfilePic(imageUrl: $imageUrl)  {\r\n        username\r\n        imageUrl\r\n    }\r\n}\r\n`\r\n\r\nexport const DELETE_PROFILEPIC = gql`\r\nmutation deleteUserProfilePic {\r\n    deleteUserProfilePic {\r\n        username\r\n        imageUrl\r\n    }\r\n}\r\n`","const reducer = (state = '', action) => {\r\n    switch (action.type) {\r\n        case 'SET NOTIFICATION': {\r\n            return action.notification\r\n        }\r\n        default: return state\r\n    }\r\n}\r\n\r\nlet timeout\r\n\r\nexport const setNotification = (notification, time) => {\r\n    return async dispatch => {\r\n        if (notification !== '') {\r\n            clearTimeout(timeout)\r\n            timeout = setTimeout(() => {\r\n                dispatch(setNotification(''))\r\n            }, time * 1000)\r\n        }\r\n        dispatch({\r\n            type: 'SET NOTIFICATION',\r\n            notification: notification\r\n        })\r\n    }\r\n}\r\n\r\nexport default reducer","import React from 'react'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport { Alert } from 'react-bootstrap'\r\nimport { setNotification } from '../reducers/notificationReducer'\r\n\r\nconst Notification = () => {\r\n    const notification = useSelector(state => state.notification)\r\n    const style = { position: 'absolute', width: '100%', textAlign: 'center', zIndex:9999 }\r\n    const dispatch = useDispatch()\r\n    const clearAlert = () => {\r\n        dispatch(setNotification(''))\r\n    }\r\n    if (notification === '') {\r\n        return (\r\n            <></>\r\n        )\r\n    }\r\n    if (notification.error) {\r\n        return (\r\n            <Alert style={style} variant=\"danger\" className='errormessage' onClick={clearAlert}>{notification.message}</Alert>\r\n        )\r\n    }\r\n    return (\r\n        <Alert style={style} variant=\"success\" className='message' onClick={clearAlert}>{notification.message}</Alert>\r\n    )\r\n}\r\n\r\nexport default Notification","const reducer = (state = null, action) => {\r\n    switch (action.type) {\r\n        case 'SET_TOKEN': {\r\n            return action.data\r\n        }\r\n        default: return state\r\n    }\r\n}\r\n\r\nexport const setToken = (token) => {\r\n    return async dispatch => {\r\n        dispatch({\r\n            type: 'SET_TOKEN',\r\n            data: token\r\n        })\r\n    }\r\n}\r\n\r\nexport default reducer","const reducer = (state = null, action) => {\r\n    switch (action.type) {\r\n        case 'SET_USER': {\r\n            return action.data\r\n        }\r\n        default: return state\r\n    }\r\n}\r\n\r\nexport const setUser = (user) => {\r\n    return async dispatch => {\r\n\r\n        dispatch({\r\n            type: 'SET_USER',\r\n            data: user\r\n        })\r\n    }\r\n}\r\n\r\nexport default reducer","import React, { useState, useEffect } from 'react'\r\nimport { Form, Button } from 'react-bootstrap'\r\nimport { useMutation } from '@apollo/client'\r\nimport { LOGIN } from '../queries/userqueries'\r\nimport Notification from './Notification'\r\nimport { setNotification } from '../reducers/notificationReducer'\r\nimport { setToken } from '../reducers/tokenReducer'\r\nimport { setUser } from '../reducers/userReducer'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { useHistory, Link } from 'react-router-dom'\r\n\r\nconst LoginForm = () => {\r\n    const [username, setUsername] = useState('')\r\n    const [password, setPassword] = useState('')\r\n    const dispatch = useDispatch()\r\n    const history = useHistory()\r\n    const mode = useSelector(state => state.mode)\r\n    const [login, result] = useMutation(LOGIN, {\r\n        onError: (error) => {\r\n            dispatch(setNotification({ message: error.graphQLErrors[0].message, error: true }, 10))\r\n        }\r\n    })\r\n    useEffect(() => {\r\n        if (result.data) {\r\n            const token = result.data.login.value\r\n            const user = result.data.login.user\r\n            dispatch(setToken(token))\r\n            localStorage.setItem('user-token', token)\r\n            history.push('/')\r\n            localStorage.setItem('logged-user', JSON.stringify(user))\r\n            dispatch(setUser(user))\r\n            dispatch(setNotification({ message: 'Logged in', error: false }, 10))\r\n        }\r\n    }, [result.data]) // eslint-disable-line\r\n    const submit = (event) => {\r\n        event.preventDefault()\r\n        login({ variables: { username, password } })\r\n        setUsername('')\r\n        setPassword('')\r\n    }\r\n    const style = { borderColor: 'grey' }\r\n    if (mode === 'light') {\r\n        style.backgroundColor = 'white'\r\n    } else {\r\n        style.backgroundColor = 'darkgray'\r\n    }\r\n    return (\r\n        <>\r\n            <Notification></Notification>\r\n            <div className='container'>\r\n                <h2>Login</h2>\r\n                <Form onSubmit={submit}>\r\n                    <Form.Label>username:</Form.Label>\r\n                    <Form.Control type=\"text\" id='username' style={style} value={username} name=\"username\" onChange={({ target }) => setUsername(target.value)} required />\r\n                    <Form.Label>password:</Form.Label>\r\n                    <Form.Control type=\"password\" id='password' style={style} value={password} name=\"password\" onChange={({ target }) => setPassword(target.value)} required />\r\n                    <Button id='submit' type=\"submit\">Login</Button> or <Link to='/signin'>Sign in</Link>\r\n                </Form>\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default LoginForm","import { gql } from '@apollo/client'\r\n\r\nexport const CREATE_CHAT = gql`\r\n    mutation createChat($chatTitle: String!) {\r\n        createChat(chatTitle: $chatTitle)  {\r\n            title\r\n        }\r\n    }\r\n`\r\n\r\nexport const DELETE_CHAT = gql`\r\n    mutation deleteChat($chatId: String!) {\r\n        deleteChat(chatId: $chatId)  {\r\n            title\r\n        }\r\n    }\r\n`\r\n\r\nexport const CHATS = gql`\r\n    query {\r\n        chats {\r\n            title\r\n            latestComment{\r\n                content\r\n                date\r\n                user{\r\n                    username\r\n                }\r\n            }\r\n            id\r\n            date\r\n            reports\r\n        }\r\n    }\r\n`\r\n\r\nexport const CHATS_PINNED = gql`\r\n    query {\r\n        pinnedChats {\r\n            title\r\n            latestComment{\r\n                content\r\n                date\r\n                user{\r\n                    username\r\n                }\r\n            }\r\n            id\r\n            date\r\n            reports\r\n        }\r\n    }\r\n`\r\n\r\nexport const REPORTED_CHATS = gql`\r\n    query {\r\n        reportedChats {\r\n            title\r\n            latestComment{\r\n                content\r\n                date\r\n                user{\r\n                    username\r\n                }\r\n            }\r\n            id\r\n            date\r\n            reports\r\n        }\r\n    }\r\n`\r\n\r\nexport const CHAT = gql`\r\n    query chat($chatTitle: String!){\r\n        chat(chatTitle: $chatTitle) {\r\n            comments {\r\n                user { \r\n                    username\r\n                    imageUrl\r\n                }\r\n                date\r\n                content\r\n                imageUrl\r\n                hasVideo\r\n                reports\r\n                id\r\n            }\r\n            title\r\n            reports\r\n        }\r\n    }\r\n`\r\n\r\nexport const PINNED_CHATS = gql`\r\n    query {\r\n        pinnedChats {\r\n            title\r\n        }\r\n    }\r\n`\r\n\r\nexport const CHAT_ADDED = gql`\r\n    subscription {\r\n        chatAdded {\r\n            title\r\n            latestComment {\r\n                content\r\n                date\r\n                user {\r\n                    username\r\n                }\r\n            }\r\n            date\r\n            id\r\n            reports\r\n        }\r\n    }\r\n`\r\n\r\nexport const CHAT_REPORTED = gql`\r\n    subscription {\r\n        chatReported {\r\n            title\r\n            id\r\n            latestComment {\r\n                content\r\n                date\r\n                user {\r\n                    username\r\n                }\r\n            }\r\n            comments{\r\n                user { \r\n                    username\r\n                    imageUrl\r\n                }\r\n                date\r\n                content\r\n                imageUrl\r\n                hasVideo\r\n                reports\r\n                id\r\n            }\r\n            date\r\n            reports\r\n        }\r\n    }\r\n`\r\n\r\nexport const CHAT_DELETED = gql`\r\n    subscription {\r\n        chatDeleted {\r\n            title\r\n            id\r\n        }\r\n    }\r\n`\r\n\r\nexport const PIN_CHAT = gql`\r\n    mutation pinChat($chatTitle: String!) {\r\n        pinChat(chatTitle: $chatTitle)  {\r\n            title\r\n        }\r\n    }\r\n`\r\n\r\nexport const UNPIN_CHAT = gql`\r\n    mutation unpinChat($chatTitle: String!) {\r\n        unpinChat(chatTitle: $chatTitle)  {\r\n            title\r\n        }\r\n    }\r\n`\r\n\r\nexport const REPORT_CHAT = gql`\r\n    mutation reportChat($chatTitle: String!) {\r\n        reportChat(chatTitle: $chatTitle)  {\r\n            title\r\n        }\r\n    }\r\n`\r\n\r\nexport const UNREPORT_CHAT = gql`\r\n    mutation unreportChat($chatTitle: String!) {\r\n        unreportChat(chatTitle: $chatTitle)  {\r\n            title\r\n        }\r\n    }\r\n`\r\n\r\nexport const ZEROREPORT_CHAT = gql`\r\n    mutation zeroReportChat($chatTitle: String!) {\r\n        zeroReportChat(chatTitle: $chatTitle)  {\r\n            title\r\n        }\r\n    }\r\n`","import { gql } from '@apollo/client'\r\n\r\nexport const CREATE_COMMENT = gql`\r\n    mutation createComment($chatTitle: String!, $content: String!, $imageUrl: String) {\r\n        createComment(chatTitle: $chatTitle, content: $content, imageUrl: $imageUrl)  {\r\n            content\r\n            date\r\n            imageUrl\r\n            hasVideo\r\n            reports\r\n            id\r\n            user{\r\n                username\r\n                imageUrl\r\n            }\r\n        }\r\n    }\r\n`\r\n\r\nexport const REPORTED_COMMENTS = gql`\r\n    query {\r\n        reportedComments {\r\n            content\r\n            date\r\n            imageUrl\r\n            hasVideo\r\n            id\r\n            user{\r\n                username\r\n                imageUrl\r\n            }\r\n            reports\r\n        }\r\n    }\r\n`\r\n\r\nexport const COMMENT_ADDED = gql`\r\n    subscription {\r\n        commentAdded {\r\n            comment {\r\n                user { \r\n                    username\r\n                    imageUrl\r\n                }\r\n                date\r\n                content\r\n                imageUrl\r\n                hasVideo\r\n                reports\r\n                id\r\n            }\r\n            chatTitle\r\n        }\r\n    }\r\n`\r\n\r\nexport const DELETE_COMMENT = gql`\r\n    mutation deleteComment($commentId: String!) {\r\n        deleteComment(commentId: $commentId)  {\r\n            content\r\n            id\r\n        }\r\n    }\r\n`\r\n\r\nexport const COMMENT_DELETED = gql`\r\n    subscription {\r\n        commentDeleted {\r\n            content\r\n            imageUrl\r\n            reports\r\n            id\r\n        }\r\n    }\r\n`\r\n\r\nexport const EDIT_COMMENT = gql`\r\n    mutation editComment($commentId: String!, $content: String!, $imageUrl: String) {\r\n        editComment(\r\n            commentId: $commentId\r\n            content: $content\r\n            imageUrl: $imageUrl\r\n        ){\r\n            content\r\n            id\r\n        }\r\n    }\r\n`\r\n\r\nexport const COMMENT_EDITED = gql`\r\n    subscription {\r\n        commentEdited {\r\n            content\r\n            id\r\n            imageUrl\r\n            hasVideo\r\n            reports\r\n        }\r\n    }\r\n`\r\n\r\nexport const COMMENT_REPORTED = gql`\r\n    subscription {\r\n        commentReported {\r\n            content\r\n            id\r\n            imageUrl\r\n            hasVideo\r\n            reports\r\n        }\r\n    }\r\n`\r\n\r\nexport const REPORT_COMMENT = gql`\r\n    mutation reportComment($commentId: String!) {\r\n        reportComment(commentId: $commentId)  {\r\n            id\r\n        }\r\n    }\r\n`\r\n\r\nexport const UNREPORT_COMMENT = gql`\r\n    mutation unreportComment($commentId: String!) {\r\n        unreportComment(commentId: $commentId)  {\r\n            id\r\n        }\r\n    }\r\n`\r\n\r\nexport const ZEROREPORT_COMMENT = gql`\r\n    mutation zeroReportComment($commentId: String!) {\r\n        zeroReportComment(commentId: $commentId)  {\r\n            id\r\n        }\r\n    }\r\n`","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport App from './App'\r\nimport { ApolloClient, ApolloProvider, HttpLink, InMemoryCache, split } from '@apollo/client'\r\nimport { setContext } from 'apollo-link-context'\r\nimport { getMainDefinition } from '@apollo/client/utilities'\r\nimport { WebSocketLink } from '@apollo/link-ws'\r\nimport { BrowserRouter as Router } from 'react-router-dom'\r\nimport { Provider } from 'react-redux'\r\nimport store from './store'\r\nimport { setUser } from './reducers/userReducer'\r\nimport { setToken } from './reducers/tokenReducer'\r\nimport { setMode } from './reducers/modeReducer'\r\nconst authLink = setContext((_, { headers }) => {\r\n    const token = localStorage.getItem('user-token')\r\n    return {\r\n        headers: {\r\n            ...headers,\r\n            authorization: token ? `bearer ${token}` : null\r\n        }\r\n    }\r\n})\r\n\r\n\r\nconst defaultOptions = {\r\n    watchQuery: {\r\n        fetchPolicy: 'no-cache'\r\n    },\r\n    query: {\r\n        fetchPolicy: 'no-cache'\r\n    },\r\n    mutation: {\r\n        fetchPolicy: 'no-cache'\r\n    }\r\n}\r\n\r\nconst httpLink = new HttpLink({ uri: '/graphql' })\r\n\r\nlet wsLink\r\nif (window.location.host.includes('localhost')) {\r\n    wsLink = new WebSocketLink({\r\n        uri: `ws://${window.location.host}/graphql`,\r\n        options: { reconnect: true }\r\n    })\r\n} else {\r\n    wsLink = new WebSocketLink({\r\n        uri: `wss://${window.location.host}/graphql`,\r\n        options: { reconnect: true }\r\n    })\r\n}\r\nconst splitLink = split(({ query }) => {\r\n    const definition = getMainDefinition(query)\r\n    return (definition.kind === 'OperationDefinition' && definition.operation === 'subscription')\r\n}, wsLink, authLink.concat(httpLink))\r\n\r\nconst client = new ApolloClient({\r\n    cache: new InMemoryCache(),\r\n    link: splitLink,\r\n    defaultOptions: defaultOptions\r\n})\r\n\r\n\r\n\r\n\r\nconst loggedToken = localStorage.getItem('user-token')\r\nconst loggedUser = localStorage.getItem('logged-user')\r\nconst mode = localStorage.getItem('mode')\r\nif (loggedToken) {\r\n    store.dispatch(setToken(loggedToken))\r\n}\r\nif (loggedUser) {\r\n    store.dispatch(setUser(JSON.parse(loggedUser)))\r\n}\r\nif (mode) {\r\n    store.dispatch(setMode(mode))\r\n} else {\r\n    store.dispatch(setMode('light'))\r\n}\r\nReactDOM.render(<ApolloProvider client={client}><Provider store={store}><Router><App /></Router></Provider></ApolloProvider>, document.getElementById('root'))","import React, { useEffect } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport { Button } from 'react-bootstrap'\r\nimport { useMutation } from '@apollo/client'\r\nimport { DELETE_CHAT, REPORT_CHAT, UNREPORT_CHAT, ZEROREPORT_CHAT } from '../queries/chatqueries'\r\nimport { setNotification } from '../reducers/notificationReducer'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\n\r\nconst Chat = ({ chat, isPinned, submitPin, submitUnpin }) => {\r\n    const dispatch = useDispatch()\r\n    const currentUser = useSelector(state => state.user)\r\n    let latestComment = 'No comments yet.'\r\n    const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric', hour: '2-digit', minute: '2-digit' }\r\n    let date = new Date(chat.date).toLocaleTimeString([], options)\r\n    if (chat.latestComment) {\r\n        if (chat.latestComment.content.length > 30) {\r\n            latestComment = `${chat.latestComment.content.substring(0, 30)}... -${chat.latestComment.user.username}`\r\n        } else {\r\n            latestComment = `${chat.latestComment.content} -${chat.latestComment.user.username}`\r\n        }\r\n        date = new Date(chat.latestComment.date).toLocaleTimeString([], options)\r\n    }\r\n    const [deleteChat, result] = useMutation(DELETE_CHAT, { // eslint-disable-line\r\n        onError: (error) => {\r\n            dispatch(setNotification({ message: error.graphQLErrors[0].message, error: true }, 10))\r\n        }\r\n    })\r\n    const submitDelete = () => {\r\n        if (window.confirm('Delete chat?')) {\r\n            deleteChat({ variables: { chatId: chat.id } })\r\n        }\r\n    }\r\n    const [reportChat, reportResult] = useMutation(REPORT_CHAT, { // eslint-disable-line\r\n        onError: (error) => {\r\n            dispatch(setNotification({ message: error.graphQLErrors[0].message, error: true }, 10))\r\n        }\r\n    })\r\n    const submitReport = () => {\r\n        if (window.confirm('Report chat?')) {\r\n            reportChat({ variables: { chatTitle: chat.title } })\r\n        }\r\n    }\r\n    useEffect(() => {\r\n        if (reportResult.data) {\r\n            dispatch(setNotification({ message: 'Chat reported', error: false }, 10))\r\n        }\r\n    }, [reportResult.data]) // eslint-disable-line\r\n    const [unreportChat, unreportResult] = useMutation(UNREPORT_CHAT, { // eslint-disable-line\r\n        onError: (error) => {\r\n            dispatch(setNotification({ message: error.graphQLErrors[0].message, error: true }, 10))\r\n        }\r\n    })\r\n    const submitUnreport = () => {\r\n        if (window.confirm('Unreport chat?')) {\r\n            unreportChat({ variables: { chatTitle: chat.title } })\r\n        }\r\n    }\r\n    useEffect(() => {\r\n        if (unreportResult.data) {\r\n            dispatch(setNotification({ message: 'Chat unreported', error: false }, 10))\r\n        }\r\n    }, [unreportResult.data]) // eslint-disable-line\r\n    const [zeroReportChat, zeroReportResult] = useMutation(ZEROREPORT_CHAT, { // eslint-disable-line\r\n        onError: (error) => {\r\n            dispatch(setNotification({ message: error.graphQLErrors[0].message, error: true }, 10))\r\n        }\r\n    })\r\n    const submitZeroReport = () => {\r\n        if (window.confirm('Zero chat\\'s reports?')) {\r\n            zeroReportChat({ variables: { chatTitle: chat.title } })\r\n        }\r\n    }\r\n    useEffect(() => {\r\n        if (zeroReportResult.loading && zeroReportResult.called) {\r\n            dispatch(setNotification({ message: 'Chat\\'s reports zeroed', error: false }, 10))\r\n        }\r\n    }, [zeroReportResult]) // eslint-disable-line\r\n    const styleBox = {\r\n        borderStyle: 'solid',\r\n        borderRadius: '5px',\r\n        padding: '10px',\r\n        marginBottom: '10px'\r\n    }\r\n    return (\r\n        <div style={styleBox}>\r\n            <div>\r\n                <Link to={`/chats/${chat.title}`}>{chat.title}</Link>\r\n                {currentUser.admin ?\r\n                    <> Reports: {chat.reports.length}</>\r\n                    :\r\n                    <></>\r\n                }\r\n            </div>\r\n\r\n            <div>\r\n                {latestComment}\r\n            </div>\r\n            <div>\r\n                {date}&nbsp;\r\n                {isPinned ?\r\n                    <Button type='button' size='sm' onClick={() => submitUnpin(chat)}>Unpin</Button>\r\n                    :\r\n                    <Button type='button' size='sm' onClick={() => submitPin(chat)}>Pin</Button>\r\n                }\r\n                {currentUser.admin ?\r\n                    <>\r\n                        {chat.reports.length > 0 ?\r\n                            <Button type='button' size='sm' onClick={submitZeroReport}>Zero reports</Button>\r\n                            :\r\n                            <></>\r\n                        }\r\n                        <Button type='button' size='sm' onClick={submitDelete}>Delete</Button>\r\n                    </>\r\n                    :\r\n                    <>\r\n                        {chat.reports.includes(currentUser.id) ?\r\n                            <Button type='button' size='sm' onClick={submitUnreport}>Unreport</Button>\r\n                            :\r\n                            <Button type='button' size='sm' onClick={submitReport}>Report</Button>\r\n                        }\r\n                    </>\r\n                }\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Chat","import React, { useState, useEffect } from 'react'\r\nimport { Form, Button, Row, Col } from 'react-bootstrap'\r\nimport { useMutation } from '@apollo/client'\r\nimport { CREATE_CHAT } from '../queries/chatqueries'\r\nimport { setNotification } from '../reducers/notificationReducer'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { useHistory } from 'react-router-dom'\r\n\r\nconst ChatForm = () => {\r\n    const [title, setTitle] = useState('')\r\n    const dispatch = useDispatch()\r\n    const mode = useSelector(state => state.mode)\r\n    const history = useHistory()\r\n    const [create, result] = useMutation(CREATE_CHAT, { // eslint-disable-line\r\n        onError: (error) => {\r\n            dispatch(setNotification({ message: error.graphQLErrors[0].message, error: true }, 10))\r\n        }\r\n    })\r\n    const submit = (event) => {\r\n        event.preventDefault()\r\n        create({ variables: { chatTitle: title } })\r\n        setTitle('')\r\n    }\r\n    useEffect(() => {\r\n        if (result.data) {\r\n            dispatch(setNotification({ message: 'New chat created', error: false }, 10))\r\n            history.push(`/chats/${result.data.createChat.title}`)\r\n        }\r\n    }, [result.data]) // eslint-disable-line\r\n    const style = { resize: 'none', borderColor: 'grey' }\r\n    if (mode === 'light') {\r\n        style.backgroundColor = 'white'\r\n    } else {\r\n        style.backgroundColor = 'darkgray'\r\n    }\r\n    return (\r\n        <Form onSubmit={submit}>\r\n            <Row size=\"lg\">\r\n                <Col md=\"10\" style={{ paddingRight: '0', paddingLeft: '0' }}>\r\n                    <Form.Control as=\"textarea\" rows=\"1\" style={style} id='content' value={title} name=\"content\" onChange={({ target }) => setTitle(target.value)} placeholder='Title...' required block='true' />\r\n                </Col>\r\n                <Col md=\"2\" style={{ paddingRight: '0', paddingLeft: '0' }}>\r\n                    <Button style={{ height: '100%' }} id='submit' type=\"submit\" size=\"lg\" block='true'>Start new chat</Button>\r\n                </Col>\r\n            </Row>\r\n        </Form>\r\n    )\r\n}\r\n\r\nexport default ChatForm","import React, { useState, useEffect, useCallback } from 'react'\r\nimport { useLazyQuery, useSubscription, useMutation } from '@apollo/client'\r\nimport { CHAT_ADDED, CHATS, PINNED_CHATS, CHAT_DELETED, UNPIN_CHAT, PIN_CHAT, CHAT_REPORTED } from '../queries/chatqueries'\r\nimport { COMMENT_ADDED } from '../queries/commentqueries'\r\nimport ChatListing from './ChatListing'\r\nimport ChatForm from './ChatForm'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { setNotification } from '../reducers/notificationReducer'\r\nimport { Row, Col } from 'react-bootstrap'\r\n\r\nconst ChatsPage = () => {\r\n    const dispatch = useDispatch()\r\n    const mode = useSelector(state => state.mode)\r\n    const [chats, setChats] = useState([])\r\n    const [loadChats, chatsResult] = useLazyQuery(CHATS)\r\n    const [loadPinnedChats, pinnedChatsResult] = useLazyQuery(PINNED_CHATS)\r\n    const [chatsToShow, setChatsToShow] = useState([])\r\n    const [filter, setFilter] = useState('')\r\n    const [pinnedChats, setPinnedChats] = useState()\r\n    const sortChats = useCallback((chatA, chatB) => {\r\n        if (!pinnedChats) {\r\n            return 0\r\n        }\r\n        if (pinnedChats.includes(chatA.title) && !pinnedChats.includes(chatB.title)) {\r\n            return -1\r\n        }\r\n        if (!pinnedChats.includes(chatA.title) && pinnedChats.includes(chatB.title)) {\r\n            return 1\r\n        }\r\n        let dateA = chatA.date\r\n        if (chatA.latestComment) {\r\n            dateA = chatA.latestComment.date\r\n        }\r\n        let dateB = chatB.date\r\n        if (chatB.latestComment) {\r\n            dateB = chatB.latestComment.date\r\n        }\r\n        return dateB - dateA\r\n    }, [pinnedChats])\r\n    useEffect(() => {\r\n        loadChats()\r\n        loadPinnedChats()\r\n    }, []) //eslint-disable-line\r\n    useEffect(() => {\r\n        if (chatsResult.data) {\r\n            setChats(chatsResult.data.chats.slice(0).sort(sortChats))\r\n            setChatsToShow(chats)\r\n        }\r\n    }, [chatsResult.data]) //eslint-disable-line\r\n    useEffect(() => {\r\n        if (pinnedChatsResult.data) {\r\n            setPinnedChats(pinnedChatsResult.data.pinnedChats.map(chat => chat.title))\r\n        }\r\n    }, [pinnedChatsResult.data]) //eslint-disable-line\r\n    useSubscription(CHAT_ADDED, {\r\n        onSubscriptionData: ({ subscriptionData }) => {\r\n            const newChat = subscriptionData.data.chatAdded\r\n            const newChats = chats.concat(newChat)\r\n            newChats.sort(sortChats)\r\n            setChats(newChats)\r\n        }\r\n    })\r\n    useSubscription(COMMENT_ADDED, {\r\n        onSubscriptionData: ({ subscriptionData }) => {\r\n            const newComment = subscriptionData.data.commentAdded.comment\r\n            const chatTitle = subscriptionData.data.commentAdded.chatTitle\r\n            const newChats = chats.map(chat => chat.title === chatTitle ? { ...chat, latestComment: newComment } : chat)\r\n            newChats.sort(sortChats)\r\n            setChats(newChats)\r\n        }\r\n    })\r\n    useSubscription(CHAT_REPORTED, {\r\n        onSubscriptionData: ({ subscriptionData }) => {\r\n            const reportedChat = subscriptionData.data.chatReported\r\n            const newChats = chats.map(chat => chat.title === reportedChat.title ? { ...chat, reports: reportedChat.reports } : chat)\r\n            newChats.sort(sortChats)\r\n            setChats(newChats)\r\n        }\r\n    })\r\n    useEffect(() => {\r\n        if (filter === '') {\r\n            setChatsToShow(chats.slice(0).sort(sortChats))\r\n        } else {\r\n            setChatsToShow(chats.filter(chat => chat.title.toLowerCase().startsWith(filter.toLowerCase())).sort(sortChats))\r\n        }\r\n    }, [filter, chats, sortChats])\r\n    const [pinChat, pinResult] = useMutation(PIN_CHAT, { // eslint-disable-line\r\n        onError: (error) => {\r\n            dispatch(setNotification({ message: error.graphQLErrors[0].message, error: true }, 10))\r\n        }\r\n    })\r\n    const [unpinChat, unpinResult] = useMutation(UNPIN_CHAT, { // eslint-disable-line\r\n        onError: (error) => {\r\n            dispatch(setNotification({ message: error.graphQLErrors[0].message, error: true }, 10))\r\n        }\r\n    })\r\n    const submitPin = (chat) => {\r\n        if (window.confirm('Pin chat?')) {\r\n            pinChat({ variables: { chatTitle: chat.title } })\r\n        }\r\n    }\r\n    useEffect(() => {\r\n        if (pinResult.data) {\r\n            setPinnedChats(pinnedChats.concat(pinResult.data.pinChat.title))\r\n            dispatch(setNotification({ message: 'Chat pinned', error: false }, 10))\r\n        }\r\n    }, [pinResult.data]) // eslint-disable-line\r\n    const submitUnpin = (chat) => {\r\n        if (window.confirm('Unpin chat?')) {\r\n            unpinChat({ variables: { chatTitle: chat.title } })\r\n        }\r\n    }\r\n    useEffect(() => {\r\n        if (unpinResult.data) {\r\n            setPinnedChats(pinnedChats.filter(pchat => pchat !== unpinResult.data.unpinChat.title))\r\n            dispatch(setNotification({ message: 'Chat unpinned', error: false }, 10))\r\n        }\r\n    }, [unpinResult.data]) // eslint-disable-line\r\n    useSubscription(CHAT_DELETED, {\r\n        onSubscriptionData: ({ subscriptionData }) => {\r\n            const deletedChat = subscriptionData.data.chatDeleted\r\n            setChats(chats.filter(chat => chat.id !== deletedChat.id))\r\n        }\r\n    })\r\n    const styleBox = {\r\n        borderStyle: 'solid',\r\n        borderRadius: '5px',\r\n        borderColor: 'grey',\r\n        padding: '10px',\r\n        marginBottom: '0',\r\n        overflowY: 'scroll',\r\n        height: '77.5vh'\r\n    }\r\n    const filterStyle = { width: '100%', paddingBottom: '0', borderColor: 'grey' }\r\n    if (mode === 'light') {\r\n        filterStyle.backgroundColor = 'white'\r\n    } else {\r\n        filterStyle.backgroundColor = 'darkgray'\r\n    }\r\n    const colStyle = { paddingRight: '0', paddingLeft: '0' }\r\n    return (\r\n        <div style={{ height: '100%' }}>\r\n            <Row>\r\n                <Col md=\"8\" style={colStyle}>\r\n                    <h2 style={{ display: 'inline-block', marginBottom: '0' }}>Chats</h2>\r\n                </Col>\r\n                <Col md=\"4\" style={colStyle}>\r\n                    <input style={filterStyle} type='text' value={filter} onChange={({ target }) => setFilter(target.value)} placeholder='Filter chats by title...'></input>\r\n                </Col>\r\n            </Row>\r\n            <Row>\r\n                <Col style={colStyle}>\r\n                    <div style={styleBox}>\r\n                        {pinnedChats ?\r\n                            <>\r\n                                {chatsToShow.map(chat =>\r\n                                    <ChatListing key={chat.id} chat={chat} submitPin={submitPin} submitUnpin={submitUnpin} isPinned={pinnedChats.includes(chat.title)}></ChatListing>\r\n                                )}\r\n                            </>\r\n                            :\r\n                            <div>Loading</div>\r\n                        }\r\n                    </div>\r\n                </Col>\r\n            </Row>\r\n            <ChatForm></ChatForm>\r\n        </div >\r\n    )\r\n}\r\n\r\nexport default ChatsPage","import React, { useState, useEffect, useCallback } from 'react'\r\nimport { useLazyQuery, useSubscription, useMutation } from '@apollo/client'\r\nimport { CHAT_ADDED, CHATS_PINNED, PINNED_CHATS, CHAT_DELETED, UNPIN_CHAT, PIN_CHAT, CHAT_REPORTED } from '../queries/chatqueries'\r\nimport { COMMENT_ADDED } from '../queries/commentqueries'\r\nimport ChatListing from './ChatListing'\r\nimport ChatForm from './ChatForm'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { setNotification } from '../reducers/notificationReducer'\r\nimport { Row, Col } from 'react-bootstrap'\r\n\r\nconst ChatsPage = () => {\r\n    const dispatch = useDispatch()\r\n    const mode = useSelector(state => state.mode)\r\n    const [chats, setChats] = useState([])\r\n    const [loadChats, chatsResult] = useLazyQuery(CHATS_PINNED)\r\n    const [loadPinnedChats, pinnedChatsResult] = useLazyQuery(PINNED_CHATS)\r\n    const [chatsToShow, setChatsToShow] = useState([])\r\n    const [filter, setFilter] = useState('')\r\n    const [pinnedChats, setPinnedChats] = useState()\r\n    const sortChats = useCallback((chatA, chatB) => {\r\n        if (!pinnedChats) {\r\n            return 0\r\n        }\r\n        if (pinnedChats.includes(chatA.title) && !pinnedChats.includes(chatB.title)) {\r\n            return -1\r\n        }\r\n        if (!pinnedChats.includes(chatA.title) && pinnedChats.includes(chatB.title)) {\r\n            return 1\r\n        }\r\n        let dateA = chatA.date\r\n        if (chatA.latestComment) {\r\n            dateA = chatA.latestComment.date\r\n        }\r\n        let dateB = chatB.date\r\n        if (chatB.latestComment) {\r\n            dateB = chatB.latestComment.date\r\n        }\r\n        return dateB - dateA\r\n    }, [pinnedChats])\r\n    useEffect(() => {\r\n        loadChats()\r\n        loadPinnedChats()\r\n    }, []) //eslint-disable-line\r\n    useEffect(() => {\r\n        if (chatsResult.data) {\r\n            console.log(chatsResult.data)\r\n            setChats(chatsResult.data.pinnedChats.slice(0).sort(sortChats))\r\n            setChatsToShow(chats)\r\n        }\r\n    }, [chatsResult.data]) //eslint-disable-line\r\n    useEffect(() => {\r\n        if (pinnedChatsResult.data) {\r\n            setPinnedChats(pinnedChatsResult.data.pinnedChats.map(chat => chat.title))\r\n        }\r\n    }, [pinnedChatsResult.data]) //eslint-disable-line\r\n    useSubscription(CHAT_ADDED, {\r\n        onSubscriptionData: ({ subscriptionData }) => {\r\n            const newChat = subscriptionData.data.chatAdded\r\n            const newChats = chats.concat(newChat)\r\n            newChats.sort(sortChats)\r\n            setChats(newChats)\r\n        }\r\n    })\r\n    useSubscription(COMMENT_ADDED, {\r\n        onSubscriptionData: ({ subscriptionData }) => {\r\n            const newComment = subscriptionData.data.commentAdded.comment\r\n            const chatTitle = subscriptionData.data.commentAdded.chatTitle\r\n            const newChats = chats.map(chat => chat.title === chatTitle ? { ...chat, latestComment: newComment } : chat)\r\n            newChats.sort(sortChats)\r\n            setChats(newChats)\r\n        }\r\n    })\r\n    useSubscription(CHAT_REPORTED, {\r\n        onSubscriptionData: ({ subscriptionData }) => {\r\n            const reportedChat = subscriptionData.data.chatReported\r\n            const newChats = chats.map(chat => chat.title === reportedChat.title ? { ...chat, reports: reportedChat.reports } : chat)\r\n            newChats.sort(sortChats)\r\n            setChats(newChats)\r\n        }\r\n    })\r\n    useEffect(() => {\r\n        if (filter === '') {\r\n            setChatsToShow(chats.slice(0).sort(sortChats))\r\n        } else {\r\n            setChatsToShow(chats.filter(chat => chat.title.toLowerCase().startsWith(filter.toLowerCase())).sort(sortChats))\r\n        }\r\n    }, [filter, chats, sortChats])\r\n    const [pinChat, pinResult] = useMutation(PIN_CHAT, { // eslint-disable-line\r\n        onError: (error) => {\r\n            dispatch(setNotification({ message: error.graphQLErrors[0].message, error: true }, 10))\r\n        }\r\n    })\r\n    const [unpinChat, unpinResult] = useMutation(UNPIN_CHAT, { // eslint-disable-line\r\n        onError: (error) => {\r\n            dispatch(setNotification({ message: error.graphQLErrors[0].message, error: true }, 10))\r\n        }\r\n    })\r\n    const submitPin = (chat) => {\r\n        if (window.confirm('Pin chat?')) {\r\n            pinChat({ variables: { chatTitle: chat.title } })\r\n        }\r\n    }\r\n    useEffect(() => {\r\n        if (pinResult.data) {\r\n            setPinnedChats(pinnedChats.concat(pinResult.data.pinChat.title))\r\n            dispatch(setNotification({ message: 'Chat pinned', error: false }, 10))\r\n        }\r\n    }, [pinResult.data]) // eslint-disable-line\r\n    const submitUnpin = (chat) => {\r\n        if (window.confirm('Unpin chat?')) {\r\n            unpinChat({ variables: { chatTitle: chat.title } })\r\n        }\r\n    }\r\n    useEffect(() => {\r\n        if (unpinResult.data) {\r\n            setPinnedChats(pinnedChats.filter(pchat => pchat !== unpinResult.data.unpinChat.title))\r\n            dispatch(setNotification({ message: 'Chat unpinned', error: false }, 10))\r\n        }\r\n    }, [unpinResult.data]) // eslint-disable-line\r\n    useEffect(() => {\r\n        setChats(chats.filter(pchat => pinnedChats.includes(pchat.title)))\r\n    }, [pinnedChats]) // eslint-disable-line\r\n    useSubscription(CHAT_DELETED, {\r\n        onSubscriptionData: ({ subscriptionData }) => {\r\n            const deletedChat = subscriptionData.data.chatDeleted\r\n            setChats(chats.filter(chat => chat.id !== deletedChat.id))\r\n        }\r\n    })\r\n    const styleBox = {\r\n        borderStyle: 'solid',\r\n        borderRadius: '5px',\r\n        borderColor: 'grey',\r\n        padding: '10px',\r\n        marginBottom: '0',\r\n        overflowY: 'scroll',\r\n        height: '77.5vh'\r\n    }\r\n    const filterStyle = { width: '100%', paddingBottom: '0', borderColor: 'grey' }\r\n    if (mode === 'light') {\r\n        filterStyle.backgroundColor = 'white'\r\n    } else {\r\n        filterStyle.backgroundColor = 'darkgray'\r\n    }\r\n    const colStyle = { paddingRight: '0', paddingLeft: '0' }\r\n    return (\r\n        <div style={{ height: '100%' }}>\r\n            <Row>\r\n                <Col md=\"8\" style={colStyle}>\r\n                    <h2 style={{ display: 'inline-block', marginBottom: '0' }}>Pinned chats</h2>\r\n                </Col>\r\n                <Col md=\"4\" style={colStyle}>\r\n                    <input style={filterStyle} type='text' value={filter} onChange={({ target }) => setFilter(target.value)} placeholder='Filter chats by title...'></input>\r\n                </Col>\r\n            </Row>\r\n            <Row>\r\n                <Col style={colStyle}>\r\n                    <div style={styleBox}>\r\n                        {pinnedChats ?\r\n                            <>\r\n                                {chatsToShow.map(chat =>\r\n                                    <ChatListing key={chat.id} chat={chat} submitPin={submitPin} submitUnpin={submitUnpin} isPinned={pinnedChats.includes(chat.title)}></ChatListing>\r\n                                )}\r\n                            </>\r\n                            :\r\n                            <div>Loading</div>\r\n                        }\r\n                    </div>\r\n                </Col>\r\n            </Row>\r\n            <ChatForm></ChatForm>\r\n        </div >\r\n    )\r\n}\r\n\r\nexport default ChatsPage","import React, { useState, useEffect, useCallback } from 'react'\r\nimport { useLazyQuery, useSubscription, useMutation } from '@apollo/client'\r\nimport { CHAT_ADDED, REPORTED_CHATS, PINNED_CHATS, CHAT_DELETED, UNPIN_CHAT, PIN_CHAT, CHAT_REPORTED } from '../queries/chatqueries'\r\nimport { COMMENT_ADDED } from '../queries/commentqueries'\r\nimport ChatListing from './ChatListing'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { setNotification } from '../reducers/notificationReducer'\r\nimport { useHistory } from 'react-router-dom'\r\nimport { Row, Col } from 'react-bootstrap'\r\n\r\nconst ReportedChatsPage = () => {\r\n    const dispatch = useDispatch()\r\n    const mode = useSelector(state => state.mode)\r\n    const currentUser = useSelector(state => state.user)\r\n    const history = useHistory()\r\n    const [chats, setChats] = useState([])\r\n    const [loadReportedChats, reportedChatsResult] = useLazyQuery(REPORTED_CHATS)\r\n    const [loadPinnedChats, pinnedChatsResult] = useLazyQuery(PINNED_CHATS)\r\n    const [chatsToShow, setChatsToShow] = useState([])\r\n    const [filter, setFilter] = useState('')\r\n    const [pinnedChats, setPinnedChats] = useState()\r\n    const sortChats = useCallback((chatA, chatB) => {\r\n        if (!pinnedChats) {\r\n            return 0\r\n        }\r\n        if (pinnedChats.includes(chatA.title) && !pinnedChats.includes(chatB.title)) {\r\n            return -1\r\n        }\r\n        if (!pinnedChats.includes(chatA.title) && pinnedChats.includes(chatB.title)) {\r\n            return 1\r\n        }\r\n        if (chatA.reports.length !== chatB.reports.length) {\r\n            return chatB.reports.length - chatA.reports.length\r\n        }\r\n        let dateA = chatA.date\r\n        if (chatA.latestComment) {\r\n            dateA = chatA.latestComment.date\r\n        }\r\n        let dateB = chatB.date\r\n        if (chatB.latestComment) {\r\n            dateB = chatB.latestComment.date\r\n        }\r\n        return dateB - dateA\r\n    }, [pinnedChats])\r\n    useEffect(() => {\r\n        if (!currentUser.admin) {\r\n            history.push('/error/Not authorized')\r\n        }\r\n        loadReportedChats()\r\n        loadPinnedChats()\r\n    }, []) //eslint-disable-line\r\n    useEffect(() => {\r\n        if (reportedChatsResult.data) {\r\n            setChats(reportedChatsResult.data.reportedChats.slice(0).sort(sortChats))\r\n            setChatsToShow(chats)\r\n        }\r\n    }, [reportedChatsResult.data]) //eslint-disable-line\r\n    useEffect(() => {\r\n        if (pinnedChatsResult.data) {\r\n            setPinnedChats(pinnedChatsResult.data.pinnedChats.map(chat => chat.title))\r\n        }\r\n    }, [pinnedChatsResult.data]) //eslint-disable-line\r\n    useSubscription(CHAT_ADDED, {\r\n        onSubscriptionData: ({ subscriptionData }) => {\r\n            const newChat = subscriptionData.data.chatAdded\r\n            const newChats = chats.concat(newChat)\r\n            newChats.sort(sortChats)\r\n            setChats(newChats)\r\n        }\r\n    })\r\n    useSubscription(COMMENT_ADDED, {\r\n        onSubscriptionData: ({ subscriptionData }) => {\r\n            const newComment = subscriptionData.data.commentAdded.comment\r\n            const chatTitle = subscriptionData.data.commentAdded.chatTitle\r\n            const newChats = chats.map(chat => chat.title === chatTitle ? { ...chat, latestComment: newComment } : chat)\r\n            newChats.sort(sortChats)\r\n            setChats(newChats)\r\n        }\r\n    })\r\n    useSubscription(CHAT_REPORTED, {\r\n        onSubscriptionData: ({ subscriptionData }) => {\r\n            const reportedChat = subscriptionData.data.chatReported\r\n            let newChats = []\r\n            if (chats.map(chat => chat.title).includes(reportedChat.title)) {\r\n                newChats = chats.map(chat => chat.title === reportedChat.title ? { ...chat, reports: reportedChat.reports } : chat)\r\n            } else {\r\n                newChats = chats.concat(reportedChat)\r\n            }\r\n            newChats.sort(sortChats)\r\n            setChats(newChats.filter(chat => chat.reports.length > 0))\r\n        }\r\n    })\r\n    useEffect(() => {\r\n        if (filter === '') {\r\n            setChatsToShow(chats.slice(0).sort(sortChats))\r\n        } else {\r\n            setChatsToShow(chats.filter(chat => chat.title.toLowerCase().startsWith(filter.toLowerCase())).sort(sortChats))\r\n        }\r\n    }, [filter, chats, sortChats])\r\n    const [pinChat, pinResult] = useMutation(PIN_CHAT, { // eslint-disable-line\r\n        onError: (error) => {\r\n            dispatch(setNotification({ message: error.graphQLErrors[0].message, error: true }, 10))\r\n        }\r\n    })\r\n    const [unpinChat, unpinResult] = useMutation(UNPIN_CHAT, { // eslint-disable-line\r\n        onError: (error) => {\r\n            dispatch(setNotification({ message: error.graphQLErrors[0].message, error: true }, 10))\r\n        }\r\n    })\r\n    const submitPin = (chat) => {\r\n        if (window.confirm('Pin chat?')) {\r\n            pinChat({ variables: { chatTitle: chat.title } })\r\n        }\r\n    }\r\n    useEffect(() => {\r\n        if (pinResult.data) {\r\n            setPinnedChats(pinnedChats.concat(pinResult.data.pinChat.title))\r\n            dispatch(setNotification({ message: 'Chat pinned', error: false }, 10))\r\n        }\r\n    }, [pinResult.data]) // eslint-disable-line\r\n    const submitUnpin = (chat) => {\r\n        if (window.confirm('Unpin chat?')) {\r\n            unpinChat({ variables: { chatTitle: chat.title } })\r\n        }\r\n    }\r\n    useEffect(() => {\r\n        if (unpinResult.data) {\r\n            setPinnedChats(pinnedChats.filter(pchat => pchat !== unpinResult.data.unpinChat.title))\r\n            dispatch(setNotification({ message: 'Chat unpinned', error: false }, 10))\r\n        }\r\n    }, [unpinResult.data]) // eslint-disable-line\r\n    useSubscription(CHAT_DELETED, {\r\n        onSubscriptionData: ({ subscriptionData }) => {\r\n            const deletedChat = subscriptionData.data.chatDeleted\r\n            setChats(chats.filter(chat => chat.id !== deletedChat.id))\r\n        }\r\n    })\r\n    const styleBox = {\r\n        borderStyle: 'solid',\r\n        borderRadius: '5px',\r\n        borderColor: 'grey',\r\n        padding: '10px',\r\n        marginBottom: '0',\r\n        overflowY: 'scroll',\r\n        height: '77.5vh'\r\n    }\r\n    const filterStyle = { width: '100%', paddingBottom: '0', borderColor: 'grey' }\r\n    if (mode === 'light') {\r\n        filterStyle.backgroundColor = 'white'\r\n    } else {\r\n        filterStyle.backgroundColor = 'darkgray'\r\n    }\r\n    const colStyle = { paddingRight: '0', paddingLeft: '0' }\r\n    return (\r\n        <div style={{ height: '100%' }}>\r\n            <Row>\r\n                <Col md=\"8\" style={colStyle}>\r\n                    <h2 style={{ display: 'inline-block', marginBottom: '0' }}>Reported chats</h2>\r\n                </Col>\r\n                <Col md=\"4\" style={colStyle}>\r\n                    <input style={filterStyle} type='text' value={filter} onChange={({ target }) => setFilter(target.value)} placeholder='Filter chats by title...'></input>\r\n                </Col>\r\n            </Row >\r\n            <Row>\r\n                <Col style={colStyle}>\r\n                    <div style={styleBox}>\r\n                        {pinnedChats ?\r\n                            <>\r\n                                {chatsToShow.map(chat =>\r\n                                    <ChatListing key={chat.id} chat={chat} submitPin={submitPin} submitUnpin={submitUnpin} isPinned={pinnedChats.includes(chat.title)}></ChatListing>\r\n                                )}\r\n                            </>\r\n                            :\r\n                            <div>Loading</div>\r\n                        }\r\n                    </div>\r\n                </Col>\r\n            </Row >\r\n        </div >\r\n    )\r\n}\r\n\r\nexport default ReportedChatsPage","import React, { useState } from 'react'\r\nimport '../style.css'\r\nimport { Image, Modal, OverlayTrigger, Tooltip } from 'react-bootstrap'\r\nimport { useDispatch } from 'react-redux'\r\nimport { setNotification } from '../reducers/notificationReducer'\r\n\r\nconst CommentMedia = ({ imageUrl, hasVideo }) => {\r\n    const dispatch = useDispatch()\r\n    const [show, setShow] = useState(false)\r\n    const handleClose = () => setShow(false)\r\n    const handleShow = () => {\r\n        setShow(true)\r\n        dispatch(setNotification(''))\r\n    }\r\n    if (imageUrl && imageUrl !== '') {\r\n        if (hasVideo) {\r\n            return (\r\n                <>\r\n                    <iframe width=\"420\" height=\"315\"\r\n                        frameBorder='0'\r\n                        allowFullScreen\r\n                        title='video'\r\n                        src={imageUrl}>\r\n                    </iframe>\r\n                    <br />\r\n                </>\r\n            )\r\n        } else {\r\n            return (\r\n                <>\r\n                    <OverlayTrigger placement=\"top\" delay={{ show: 250, hide: 400 }} overlay={\r\n                        <Tooltip>Click to expand</Tooltip>\r\n                    }>\r\n                        <Image src={imageUrl} onClick={handleShow} style={{ maxWidth: '30%', maxHeight: '30%' }}></Image>\r\n                    </OverlayTrigger>\r\n                    <Modal show={show} size=\"lg\" onHide={handleClose} >\r\n                        <Modal.Header closeButton></Modal.Header>\r\n                        <Modal.Body style={{ alignItems: 'center', padding: '0', position: 'absolute', maxWidth: 'max-content', height: 'auto', display: 'block' }} >\r\n                            <Image src={imageUrl} style={{ maxWidth: 'max-content', height: 'auto', display: 'block' }} fluid ></Image >\r\n                        </Modal.Body>\r\n                    </Modal>\r\n                    <br />\r\n                </>\r\n            )\r\n        }\r\n    } else {\r\n        return (\r\n            <></>\r\n        )\r\n    }\r\n}\r\n\r\nexport default CommentMedia","import React, { useEffect, useState } from 'react'\r\nimport { useMutation } from '@apollo/client'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { setNotification } from '../reducers/notificationReducer'\r\nimport { Button, Image } from 'react-bootstrap'\r\nimport { DELETE_COMMENT, EDIT_COMMENT, REPORT_COMMENT, UNREPORT_COMMENT, ZEROREPORT_COMMENT } from '../queries/commentqueries'\r\nimport { Link } from 'react-router-dom'\r\nimport CommentMedia from './CommentMedia'\r\n\r\nconst Comment = ({ comment }) => {\r\n    const dispatch = useDispatch()\r\n    const currentUser = useSelector(state => state.user)\r\n    const mode = useSelector(state => state.mode)\r\n    const [content, setContent] = useState(comment.content)\r\n    const [editing, setEditing] = useState(false)\r\n    const [imageUrl, setImageUrl] = useState(comment.imageUrl)\r\n    useEffect(() => {\r\n        if (!comment.imageUrl) {\r\n            setImageUrl('')\r\n        }\r\n    }, []) // eslint-disable-line\r\n    const [deleteComment, deleteResult] = useMutation(DELETE_COMMENT, { // eslint-disable-line\r\n        onError: (error) => {\r\n            dispatch(setNotification({ message: error.graphQLErrors[0].message, error: true }, 10))\r\n        }\r\n    })\r\n    const [editComment, editResult] = useMutation(EDIT_COMMENT, { // eslint-disable-line\r\n        onError: (error) => {\r\n            dispatch(setNotification({ message: error.graphQLErrors[0].message, error: true }, 10))\r\n        }\r\n    })\r\n    const submitDelete = () => {\r\n        if (window.confirm('Delete comment?')) {\r\n            deleteComment({ variables: { commentId: comment.id } })\r\n        }\r\n    }\r\n    useEffect(() => {\r\n        if (deleteResult.called && deleteResult.loading) {\r\n            dispatch(setNotification({ message: 'Comment deleted', error: false }, 10))\r\n        }\r\n    }, [deleteResult]) // eslint-disable-line\r\n    let profileImage = <></>\r\n    if (comment.user.imageUrl) {\r\n        profileImage = <><Image style={{ height: '10%', width: '10%' }} src={comment.user.imageUrl} fluid></Image></>\r\n    }\r\n    const submitEdit = () => {\r\n        if (window.confirm('Edit comment?')) {\r\n            editComment({ variables: { commentId: comment.id, content: content, imageUrl: imageUrl } })\r\n        }\r\n    }\r\n    useEffect(() => {\r\n        if (editResult.data) {\r\n            setEditing(false)\r\n            dispatch(setNotification({ message: 'Comment edited', error: false }, 10))\r\n        }\r\n    }, [editResult.data]) // eslint-disable-line\r\n    const stopEditing = () => {\r\n        setEditing(false)\r\n        setImageUrl(comment.imageUrl)\r\n        setContent(comment.content)\r\n    }\r\n    const startEditing = () => {\r\n        setEditing(true)\r\n        if (comment.content.endsWith(' -edited')) {\r\n            setContent(comment.content.substring(0, comment.content.length - 8))\r\n        }\r\n    }\r\n    useEffect(() => {\r\n        setContent(comment.content)\r\n    }, [comment])\r\n    const [reportComment, reportResult] = useMutation(REPORT_COMMENT, { // eslint-disable-line\r\n        onError: (error) => {\r\n            dispatch(setNotification({ message: error.graphQLErrors[0].message, error: true }, 10))\r\n        }\r\n    })\r\n    const submitReport = () => {\r\n        if (window.confirm('Report comment?')) {\r\n            reportComment({ variables: { commentId: comment.id } })\r\n        }\r\n    }\r\n    useEffect(() => {\r\n        if (reportResult.data) {\r\n            dispatch(setNotification({ message: 'Comment reported', error: false }, 10))\r\n        }\r\n    }, [reportResult.data]) // eslint-disable-line\r\n    const [unreportComment, unreportResult] = useMutation(UNREPORT_COMMENT, { // eslint-disable-line\r\n        onError: (error) => {\r\n            dispatch(setNotification({ message: error.graphQLErrors[0].message, error: true }, 10))\r\n        }\r\n    })\r\n    const submitUnreport = () => {\r\n        if (window.confirm('Unreport comment?')) {\r\n            unreportComment({ variables: { commentId: comment.id } })\r\n        }\r\n    }\r\n    useEffect(() => {\r\n        if (unreportResult.data) {\r\n            dispatch(setNotification({ message: 'Comment unreported', error: false }, 10))\r\n        }\r\n    }, [unreportResult.data]) // eslint-disable-line\r\n    const [zeroReportComment, zeroReportResult] = useMutation(ZEROREPORT_COMMENT, { // eslint-disable-line\r\n        onError: (error) => {\r\n            dispatch(setNotification({ message: error.graphQLErrors[0].message, error: true }, 10))\r\n        }\r\n    })\r\n    const submitZeroReport = () => {\r\n        if (window.confirm('Zero comment\\'s reports?')) {\r\n            zeroReportComment({ variables: { commentId: comment.id } })\r\n        }\r\n    }\r\n    useEffect(() => {\r\n        if (zeroReportResult.called && zeroReportResult.loading) {\r\n            dispatch(setNotification({ message: 'Comment\\'s reports zeroed', error: false }, 10))\r\n        }\r\n    }, [zeroReportResult]) // eslint-disable-line\r\n    const styleBox = {\r\n        borderStyle: 'solid',\r\n        borderRadius: '5px',\r\n        padding: '10px',\r\n        marginBottom: '10px'\r\n    }\r\n    const contentBoxStyle = {\r\n        width: '100%',\r\n        resize: 'none',\r\n        border: 'none'\r\n    }\r\n    const urlStyle = { borderColor: 'grey', width: '100%' }\r\n    if (mode === 'light') {\r\n        contentBoxStyle.backgroundColor = 'white'\r\n        urlStyle.backgroundColor = 'white'\r\n    } else {\r\n        contentBoxStyle.backgroundColor = 'darkgray'\r\n        urlStyle.backgroundColor = 'darkgray'\r\n    }\r\n    const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric', hour: '2-digit', minute: '2-digit' }\r\n    const date = new Date(comment.date).toLocaleTimeString([], options)\r\n    return (\r\n        <div style={styleBox}>\r\n            <div>\r\n                {profileImage} <Link to={`/users/${comment.user.username}`}>{comment.user.username}</Link> {date}\r\n                {currentUser.admin ?\r\n                    <> Reports: {comment.reports.length}</>\r\n                    :\r\n                    <></>\r\n                }\r\n            </div>\r\n            <textarea rows='2' value={content} readOnly={!editing} style={contentBoxStyle} onChange={({ target }) => setContent(target.value)} block='true' />\r\n            <CommentMedia imageUrl={comment.imageUrl} hasVideo={comment.hasVideo}></CommentMedia>\r\n            {editing ?\r\n                <>\r\n                    <input type='text' style={urlStyle} placeholder=\"Image/video url...\" value={imageUrl} onChange={({ target }) => setImageUrl(target.value)} block='true'></input><br />\r\n                </>\r\n                :\r\n                <></>\r\n            }\r\n            {(currentUser.username !== comment.user.username) && !currentUser.admin && (comment.content !== 'Comment deleted') ?\r\n                <>\r\n                    {comment.reports.includes(currentUser.id) ?\r\n                        <Button type='button' size='sm' onClick={submitUnreport}>Unreport</Button>\r\n                        :\r\n                        <Button type='button' size='sm' onClick={submitReport}>Report</Button>\r\n                    }\r\n                </>\r\n                :\r\n                <></>\r\n            }\r\n            {currentUser.admin ?\r\n                <>\r\n                    {comment.reports.length > 0 ?\r\n                        <Button type='button' size='sm' onClick={submitZeroReport}>Zero reports</Button>\r\n                        :\r\n                        <></>\r\n                    }\r\n                </>\r\n                :\r\n                <></>\r\n            }\r\n            {(currentUser.username === comment.user.username || currentUser.admin) && (comment.content !== 'Comment deleted') ?\r\n                <>\r\n                    <Button type='button' size='sm' onClick={submitDelete}>Delete comment</Button>\r\n                    {editing ?\r\n                        <>\r\n                            <Button type='button' size='sm' onClick={stopEditing}>Stop editing</Button>\r\n                            <Button type='button' size='sm' onClick={submitEdit}>Submit edit</Button>\r\n                        </>\r\n                        :\r\n                        <>\r\n                            {(currentUser.username === comment.user.username) ?\r\n                                <Button type='button' size='sm' onClick={startEditing}>Start editing</Button>\r\n                                :\r\n                                <></>\r\n                            }\r\n                        </>\r\n                    }\r\n                </>\r\n                :\r\n                <></>\r\n            }\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Comment","import React, { useState, useEffect, useRef } from 'react'\r\nimport { useLazyQuery, useSubscription } from '@apollo/client'\r\nimport { COMMENT_DELETED, COMMENT_EDITED, COMMENT_REPORTED, REPORTED_COMMENTS } from '../queries/commentqueries'\r\nimport Comment from './Comment'\r\nimport { useHistory } from 'react-router-dom'\r\nimport { useSelector } from 'react-redux'\r\nimport { Row, Col } from 'react-bootstrap'\r\n\r\nconst ReportedCommentsPage = () => {\r\n    const [comments, setComments] = useState([])\r\n    const history = useHistory()\r\n    const mode = useSelector(state => state.mode)\r\n    const currentUser = useSelector(state => state.user)\r\n    const [commentsToShow, setCommentsToShow] = useState([])\r\n    const [filter, setFilter] = useState('')\r\n    const [loadComments, commentsResult] = useLazyQuery(REPORTED_COMMENTS)\r\n    const commentsEndRef = useRef(null)\r\n    const [toScroll, setToScroll] = useState(true)\r\n    const sortComments = (commentA, commentB) => {\r\n        if (commentA.reports.length !== commentB.reports.length) {\r\n            return commentB.reports.length - commentA.reports.length\r\n        }\r\n        return commentA.date - commentB.date\r\n    }\r\n    const scrollToBottom = () => {\r\n        commentsEndRef.current.scrollIntoView({ behavior: 'smooth' })\r\n    }\r\n    useEffect(() => {\r\n        if (!currentUser.admin) {\r\n            history.push('/error/Not authorized')\r\n        }\r\n        loadComments()\r\n    }, []) //eslint-disable-line\r\n    useEffect(() => {\r\n        if (commentsResult.data) {\r\n            setToScroll(true)\r\n            setComments(commentsResult.data.reportedComments.sort(sortComments))\r\n            setTimeout(() => {\r\n                scrollToBottom()\r\n            }, 200)\r\n            setTimeout(() => {\r\n                scrollToBottom()\r\n            }, 300)\r\n        }\r\n    }, [commentsResult]) //eslint-disable-line\r\n    useEffect(() => {\r\n        if (toScroll) {\r\n            scrollToBottom()\r\n            setToScroll(false)\r\n        }\r\n    }, [commentsToShow]) //eslint-disable-line\r\n    useSubscription(COMMENT_DELETED, {\r\n        onSubscriptionData: ({ subscriptionData }) => {\r\n            const deletedComment = subscriptionData.data.commentDeleted\r\n            setComments(comments.filter(comment => comment.id !== deletedComment.id))\r\n        }\r\n    })\r\n    useSubscription(COMMENT_EDITED, {\r\n        onSubscriptionData: ({ subscriptionData }) => {\r\n            const editedComment = subscriptionData.data.commentEdited\r\n            setComments(comments.map(comment => comment.id === editedComment.id ? { ...comment, content: editedComment.content, imageUrl: editedComment.imageUrl, hasVideo: editedComment.hasVideo } : comment))\r\n        }\r\n    })\r\n    useEffect(() => {\r\n        if (filter === '') {\r\n            setCommentsToShow(comments)\r\n        } else {\r\n            setCommentsToShow(comments.filter(comment => comment.content.toLowerCase().includes(filter.toLowerCase())))\r\n        }\r\n    }, [filter, comments])\r\n    useSubscription(COMMENT_REPORTED, {\r\n        onSubscriptionData: ({ subscriptionData }) => {\r\n            const reportedComment = subscriptionData.data.commentReported\r\n            let newComments = []\r\n            if (comments.map(comment => comment.id).includes(reportedComment.id)) {\r\n                newComments = comments.map(comment => comment.id === reportedComment.id ? { ...comment, reports: reportedComment.reports } : comment)\r\n            } else {\r\n                newComments = comments.concat(reportedComment)\r\n            }\r\n            newComments.sort(sortComments)\r\n            setComments(newComments.filter(comment => comment.reports.length > 0))\r\n        }\r\n    })\r\n    const styleBox = {\r\n        borderStyle: 'solid',\r\n        borderRadius: '5px',\r\n        borderColor: 'grey',\r\n        padding: '10px',\r\n        marginBottom: '0',\r\n        overflowY: 'scroll',\r\n        height: '70vh',\r\n        width: '100%'\r\n    }\r\n    const filterStyle = { width: '100%', paddingBottom: '0', borderColor: 'grey' }\r\n    if (mode === 'light') {\r\n        filterStyle.backgroundColor = 'white'\r\n    } else {\r\n        filterStyle.backgroundColor = 'darkgray'\r\n    }\r\n    const colStyle = { paddingRight: '0', paddingLeft: '0' }\r\n    return (\r\n        <>\r\n            <Row>\r\n                <Col md=\"8\" style={colStyle}>\r\n                    <h2 style={{ display: 'inline-block', marginBottom: '0' }}>Reported comments</h2>\r\n                </Col>\r\n                <Col md=\"4\" style={colStyle}>\r\n                    <input style={filterStyle} type='text' value={filter} onChange={({ target }) => {\r\n                        setToScroll(true)\r\n                        setFilter(target.value)\r\n                    }} placeholder='Filter comments by content...'></input>\r\n                </Col>\r\n            </Row>\r\n            <Row >\r\n                <Col style={colStyle}>\r\n                    <div style={styleBox}>\r\n                        {comments.length === 0 ?\r\n                            <div>No reported comments</div>\r\n                            :\r\n                            commentsToShow.map(comment =>\r\n                                <Comment key={comment.id} comment={comment}></Comment>\r\n                            )\r\n                        }\r\n                        <div ref={commentsEndRef} />\r\n                    </div>\r\n                </Col>\r\n            </Row>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default ReportedCommentsPage","import React, { useState } from 'react'\r\nimport { Form, Button, Row, Col } from 'react-bootstrap'\r\nimport { useMutation } from '@apollo/client'\r\nimport { CREATE_COMMENT } from '../queries/commentqueries'\r\nimport { setNotification } from '../reducers/notificationReducer'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\n\r\nconst CommentForm = ({ title }) => {\r\n    const [content, setContent] = useState('')\r\n    const [imageUrl, setImageUrl] = useState('')\r\n    const dispatch = useDispatch()\r\n    const mode = useSelector(state => state.mode)\r\n    const [send, result] = useMutation(CREATE_COMMENT, { // eslint-disable-line\r\n        onCompleted: () => {\r\n            setContent('')\r\n            setImageUrl('')\r\n        },\r\n        onError: (error) => {\r\n            dispatch(setNotification({ message: error.graphQLErrors[0].message, error: true }, 10))\r\n        }\r\n    })\r\n    const submit = (event) => {\r\n        event.preventDefault()\r\n        send({ variables: { chatTitle: title, content, imageUrl } })\r\n    }\r\n    const contentStyle = { resize: 'none', borderColor: 'grey' }\r\n    const urlStyle = { borderColor: 'grey' }\r\n    if (mode === 'light') {\r\n        contentStyle.backgroundColor = 'white'\r\n        urlStyle.backgroundColor = 'white'\r\n    } else {\r\n        contentStyle.backgroundColor = 'darkgray'\r\n        urlStyle.backgroundColor = 'darkgray'\r\n    }\r\n    return (\r\n        <Form onSubmit={submit}>\r\n            <Row size='lg'>\r\n                <Col md='10' style={{ paddingRight: '0', paddingLeft: '0' }}>\r\n                    <Form.Control as='textarea' rows='2' style={contentStyle} id='content' value={content} name='content' onChange={({ target }) => setContent(target.value)} placeholder='New comment...' required block='true' />\r\n                    <Form.Control style={urlStyle} size=\"sm\" type=\"text\" placeholder=\"Image/video url...\" value={imageUrl} name='imageUrl' id='imageUrl' onChange={({ target }) => setImageUrl(target.value)} block='true'></Form.Control>\r\n                </Col>\r\n                <Col md='2' style={{ paddingLeft: '0', paddingRight: '0' }}>\r\n                    <Button style={{ height: '100%' }} id='submit' type='submit' size='lg' block>Send</Button>\r\n                </Col>\r\n            </Row>\r\n        </Form>\r\n    )\r\n}\r\n\r\nexport default CommentForm","import React, { useState, useEffect, useRef } from 'react'\r\nimport { useLazyQuery, useSubscription, useMutation } from '@apollo/client'\r\nimport { COMMENT_ADDED, COMMENT_DELETED, COMMENT_EDITED, COMMENT_REPORTED } from '../queries/commentqueries'\r\nimport { CHAT, CHAT_REPORTED, REPORT_CHAT, UNREPORT_CHAT, ZEROREPORT_CHAT, PINNED_CHATS, PIN_CHAT, UNPIN_CHAT } from '../queries/chatqueries'\r\nimport Comment from './Comment'\r\nimport CommentForm from './CommentForm'\r\nimport { useHistory } from 'react-router-dom'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport { Button, Row, Col } from 'react-bootstrap'\r\nimport { setNotification } from '../reducers/notificationReducer'\r\n\r\nconst Chat = ({ title }) => {\r\n    const [chat, setChat] = useState(null)\r\n    const [comments, setComments] = useState([])\r\n    const history = useHistory()\r\n    const dispatch = useDispatch()\r\n    const mode = useSelector(state => state.mode)\r\n    const currentUser = useSelector(state => state.user)\r\n    const [commentsToShow, setCommentsToShow] = useState([])\r\n    const [filter, setFilter] = useState('')\r\n    const [loadChat, chatResult] = useLazyQuery(CHAT)\r\n    const [loadPinnedChats, pinnedChatsResult] = useLazyQuery(PINNED_CHATS)\r\n    const [pinnedChats, setPinnedChats] = useState()\r\n    const commentsEndRef = useRef(null)\r\n    const [toScroll, setToScroll] = useState(true)\r\n    const scrollToBottom = () => {\r\n        commentsEndRef.current.scrollIntoView({ behavior: 'smooth' })\r\n    }\r\n    useEffect(() => {\r\n        loadChat({ variables: { chatTitle: title } })\r\n        loadPinnedChats()\r\n    }, []) //eslint-disable-line\r\n    useEffect(() => {\r\n        loadChat({ variables: { chatTitle: title } })\r\n        loadPinnedChats()\r\n    }, [title]) //eslint-disable-line\r\n    useEffect(() => {\r\n        if (chatResult.data) {\r\n            setToScroll(true)\r\n            setComments(chatResult.data.chat.comments.sort((commentA, commentB) => {\r\n                return commentA.date - commentB.date\r\n            }))\r\n            setChat(chatResult.data.chat)\r\n            setTimeout(() => {\r\n                scrollToBottom()\r\n            }, 200)\r\n            setTimeout(() => {\r\n                scrollToBottom()\r\n            }, 300)\r\n        } else if (chatResult.called && !chatResult.loading) {\r\n            history.push('/error/Chat does not exist')\r\n        }\r\n    }, [chatResult]) //eslint-disable-line\r\n    useEffect(() => {\r\n        if (pinnedChatsResult.data) {\r\n            setPinnedChats(pinnedChatsResult.data.pinnedChats.map(chat => chat.title))\r\n        }\r\n    }, [pinnedChatsResult.data]) //eslint-disable-line\r\n    useEffect(() => {\r\n        if (toScroll) {\r\n            scrollToBottom()\r\n            setToScroll(false)\r\n        }\r\n    }, [commentsToShow]) //eslint-disable-line\r\n    useSubscription(COMMENT_ADDED, {\r\n        onSubscriptionData: ({ subscriptionData }) => {\r\n            const newComment = subscriptionData.data.commentAdded.comment\r\n            const chatTitle = subscriptionData.data.commentAdded.chatTitle\r\n            if (chatTitle === title) {\r\n                setToScroll(true)\r\n                const newComments = comments.concat(newComment)\r\n                newComments.sort((commentA, commentB) => {\r\n                    return commentA.date - commentB.date\r\n                })\r\n                setComments(newComments)\r\n            }\r\n        }\r\n    })\r\n    useSubscription(COMMENT_DELETED, {\r\n        onSubscriptionData: ({ subscriptionData }) => {\r\n            const deletedComment = subscriptionData.data.commentDeleted\r\n            setComments(comments.map(comment => comment.id === deletedComment.id ? { ...comment, content: deletedComment.content, imageUrl: deletedComment.imageUrl, reports: deletedComment.reports } : comment))\r\n        }\r\n    })\r\n    useSubscription(COMMENT_EDITED, {\r\n        onSubscriptionData: ({ subscriptionData }) => {\r\n            const editedComment = subscriptionData.data.commentEdited\r\n            setComments(comments.map(comment => comment.id === editedComment.id ? { ...comment, content: editedComment.content, imageUrl: editedComment.imageUrl, hasVideo: editedComment.hasVideo } : comment))\r\n        }\r\n    })\r\n    useEffect(() => {\r\n        if (filter === '') {\r\n            setCommentsToShow(comments)\r\n        } else {\r\n            setCommentsToShow(comments.filter(comment => comment.content.toLowerCase().includes(filter.toLowerCase())))\r\n        }\r\n    }, [filter, comments])\r\n    const [reportChat, reportResult] = useMutation(REPORT_CHAT, { // eslint-disable-line\r\n        onError: (error) => {\r\n            dispatch(setNotification({ message: error.graphQLErrors[0].message, error: true }, 10))\r\n        }\r\n    })\r\n    const submitReport = () => {\r\n        if (window.confirm('Report chat?')) {\r\n            reportChat({ variables: { chatTitle: title } })\r\n        }\r\n    }\r\n    useEffect(() => {\r\n        if (reportResult.data) {\r\n            dispatch(setNotification({ message: 'Chat reported', error: false }, 10))\r\n        }\r\n    }, [reportResult.data]) // eslint-disable-line\r\n    const [unreportChat, unreportResult] = useMutation(UNREPORT_CHAT, { // eslint-disable-line\r\n        onError: (error) => {\r\n            dispatch(setNotification({ message: error.graphQLErrors[0].message, error: true }, 10))\r\n        }\r\n    })\r\n    const submitUnreport = () => {\r\n        if (window.confirm('Unreport chat?')) {\r\n            unreportChat({ variables: { chatTitle: title } })\r\n        }\r\n    }\r\n    useEffect(() => {\r\n        if (unreportResult.data) {\r\n            dispatch(setNotification({ message: 'Chat unreported', error: false }, 10))\r\n        }\r\n    }, [unreportResult.data]) // eslint-disable-line\r\n    const [zeroReportChat, zeroReportResult] = useMutation(ZEROREPORT_CHAT, { // eslint-disable-line\r\n        onError: (error) => {\r\n            dispatch(setNotification({ message: error.graphQLErrors[0].message, error: true }, 10))\r\n        }\r\n    })\r\n    const submitZeroReport = () => {\r\n        if (window.confirm('Zero chat\\'s reports?')) {\r\n            zeroReportChat({ variables: { chatTitle: title } })\r\n        }\r\n    }\r\n    useEffect(() => {\r\n        if (zeroReportResult.data) {\r\n            dispatch(setNotification({ message: 'Chat\\'s reports zeroed', error: false }, 10))\r\n        }\r\n    }, [zeroReportResult.data]) // eslint-disable-line\r\n    useSubscription(CHAT_REPORTED, {\r\n        onSubscriptionData: ({ subscriptionData }) => {\r\n            const reportedChat = subscriptionData.data.chatReported\r\n            if (reportedChat.title === title) {\r\n                setChat(reportedChat)\r\n            }\r\n        }\r\n    })\r\n    const [pinChat, pinResult] = useMutation(PIN_CHAT, { // eslint-disable-line\r\n        onError: (error) => {\r\n            dispatch(setNotification({ message: error.graphQLErrors[0].message, error: true }, 10))\r\n        }\r\n    })\r\n    const [unpinChat, unpinResult] = useMutation(UNPIN_CHAT, { // eslint-disable-line\r\n        onError: (error) => {\r\n            dispatch(setNotification({ message: error.graphQLErrors[0].message, error: true }, 10))\r\n        }\r\n    })\r\n    const submitPin = () => {\r\n        if (window.confirm('Pin chat?')) {\r\n            pinChat({ variables: { chatTitle: title } })\r\n        }\r\n    }\r\n    useEffect(() => {\r\n        if (pinResult.data) {\r\n            setPinnedChats(pinnedChats.concat(pinResult.data.pinChat.title))\r\n            dispatch(setNotification({ message: 'Chat pinned', error: false }, 10))\r\n        }\r\n    }, [pinResult.data]) // eslint-disable-line\r\n    const submitUnpin = () => {\r\n        if (window.confirm('Unpin chat?')) {\r\n            unpinChat({ variables: { chatTitle: title } })\r\n        }\r\n    }\r\n    useEffect(() => {\r\n        if (unpinResult.data) {\r\n            setPinnedChats(pinnedChats.filter(pchat => pchat !== unpinResult.data.unpinChat.title))\r\n            dispatch(setNotification({ message: 'Chat unpinned', error: false }, 10))\r\n        }\r\n    }, [unpinResult.data]) // eslint-disable-line\r\n    useSubscription(COMMENT_REPORTED, {\r\n        onSubscriptionData: ({ subscriptionData }) => {\r\n            const reportedComment = subscriptionData.data.commentReported\r\n            const newComments = comments.map(comment => comment.id === reportedComment.id ? { ...comment, reports: reportedComment.reports } : comment)\r\n            setComments(newComments)\r\n        }\r\n    })\r\n    const styleBox = {\r\n        borderStyle: 'solid',\r\n        borderRadius: '5px',\r\n        borderColor: 'grey',\r\n        padding: '10px',\r\n        marginBottom: '0',\r\n        overflowY: 'scroll',\r\n        height: '70vh',\r\n        width: '100%',\r\n    }\r\n    const filterStyle = { width: '100%', paddingBottom: '0', borderColor: 'grey', paddingRight: '0', paddingLeft: '0' }\r\n    if (mode === 'light') {\r\n        filterStyle.backgroundColor = 'white'\r\n    } else {\r\n        filterStyle.backgroundColor = 'darkgray'\r\n    }\r\n    const colStyle = { paddingRight: '0', paddingLeft: '0' }\r\n    return (\r\n        <>\r\n            <Row>\r\n                <Col md=\"8\" style={colStyle}>\r\n                    {title.startsWith('userChat') ?\r\n                        <h2 style={{ display: 'inline-block', marginBottom: '0' }}>{`${title.substring(8)}'s chat`}</h2>\r\n                        :\r\n                        <h2 style={{ display: 'inline-block', marginBottom: '0' }}>\r\n                            {title}&nbsp;\r\n                            {pinnedChats && pinnedChats.includes(title) ?\r\n                                <Button type='button' size='sm' onClick={submitUnpin}>Unpin</Button>\r\n                                :\r\n                                <Button type='button' size='sm' onClick={submitPin}>Pin</Button>\r\n                            }\r\n                            {currentUser.admin ?\r\n                                <>\r\n                                    {chat && chat.reports.length > 0 ?\r\n                                        <>\r\n                                            <Button type='button' size='sm' onClick={submitZeroReport}>Zero reports</Button> <span style={{ fontSize: '1rem' }}> Reports: {chat.reports.length}</span>\r\n                                        </>\r\n                                        :\r\n                                        <></>\r\n                                    }\r\n                                </>\r\n                                :\r\n                                <>\r\n                                    {chat && chat.reports && chat.reports.includes(currentUser.id) ?\r\n                                        <Button type='button' size='sm' onClick={submitUnreport}>Unreport</Button>\r\n                                        :\r\n                                        <Button type='button' size='sm' onClick={submitReport}>Report</Button>\r\n                                    }\r\n                                </>\r\n                            }\r\n                        </h2>\r\n                    }\r\n                </Col>\r\n                <Col md=\"4\" style={colStyle}>\r\n                    <input style={filterStyle} type='text' value={filter} onChange={({ target }) => {\r\n                        setToScroll(true)\r\n                        setFilter(target.value)\r\n                    }} placeholder='Filter comments by content...'></input>\r\n                </Col>\r\n            </Row>\r\n            <Row >\r\n                <Col style={colStyle}>\r\n                    <div style={styleBox}>\r\n                        {comments.length === 0 ?\r\n                            <div>No comments yet</div>\r\n                            :\r\n                            commentsToShow.map(comment =>\r\n                                <Comment key={comment.id} comment={comment}></Comment>\r\n                            )\r\n                        }\r\n                        <div ref={commentsEndRef} />\r\n                    </div>\r\n                </Col>\r\n            </Row>\r\n            <CommentForm title={title}></CommentForm>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Chat","import React from 'react'\r\nimport Chat from './Chat'\r\nimport { useRouteMatch } from 'react-router-dom'\r\n\r\nconst ChatPage = () => {\r\n    const match = useRouteMatch('/chats/:title')\r\n    const title = match ? match.params.title : null\r\n    return (\r\n        <div>\r\n            <Chat title={title}></Chat>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ChatPage","import React, { useEffect, useState } from 'react'\r\nimport { useRouteMatch } from 'react-router-dom'\r\nimport { useLazyQuery } from '@apollo/client'\r\nimport { USER } from '../queries/userqueries'\r\nimport { useHistory } from 'react-router-dom'\r\nimport { Button, Image } from 'react-bootstrap'\r\nimport { SET_PROFILEPIC, DELETE_PROFILEPIC } from '../queries/userqueries'\r\nimport { setNotification } from '../reducers/notificationReducer'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { useMutation } from '@apollo/client'\r\nimport Chat from './Chat'\r\nimport { Row, Col } from 'react-bootstrap'\r\n\r\nconst ProfilePage = () => {\r\n    const dispatch = useDispatch()\r\n    const history = useHistory()\r\n    const currentUser = useSelector(state => state.user)\r\n    const match = useRouteMatch('/users/:username')\r\n    const [user, setUser] = useState(null)\r\n    const [imageUrl, setImageUrl] = useState('')\r\n    const [editImageUrl, setEditImageUrl] = useState(false)\r\n    const username = match ? match.params.username : null\r\n    const [loadUser, userResult] = useLazyQuery(USER)\r\n    const [image, setImage] = useState(<></>)\r\n    useEffect(() => {\r\n        loadUser({ variables: { username } })\r\n    }, [username]) //eslint-disable-line\r\n    useEffect(() => {\r\n        if (userResult.data) {\r\n            setUser(userResult.data.user)\r\n        } else if (userResult.called && !userResult.loading) {\r\n            history.push('/error/User does not exist')\r\n        }\r\n    }, [userResult]) //eslint-disable-line\r\n    const [setProfilePic, profilePicResult] = useMutation(SET_PROFILEPIC, { // eslint-disable-line\r\n        onError: (error) => {\r\n            dispatch(setNotification({ message: error.graphQLErrors[0].message, error: true }, 10))\r\n        }\r\n    })\r\n    const submitSetImage = () => {\r\n        if (window.confirm('Set profile picture?')) {\r\n            setProfilePic({ variables: { imageUrl } })\r\n        }\r\n    }\r\n    useEffect(() => {\r\n        if (profilePicResult.data) {\r\n            dispatch(setNotification({ message: 'Profile picture set', error: false }, 10))\r\n            setUser({ ...user, imageUrl: profilePicResult.data.setUserProfilePic.imageUrl })\r\n            setImageUrl('')\r\n            setEditImageUrl(false)\r\n        }\r\n    }, [profilePicResult.data]) // eslint-disable-line\r\n    const [deleteProfilePic, deleteProfilePicResult] = useMutation(DELETE_PROFILEPIC, { // eslint-disable-line\r\n        onError: (error) => {\r\n            dispatch(setNotification({ message: error.graphQLErrors[0].message, error: true }, 10))\r\n        }\r\n    })\r\n    const submitDeleteImage = () => {\r\n        if (window.confirm('Delete profile picture?')) {\r\n            deleteProfilePic()\r\n        }\r\n    }\r\n    useEffect(() => {\r\n        if (deleteProfilePicResult.data) {\r\n            dispatch(setNotification({ message: 'Profile picture deleted', error: false }, 10))\r\n            setUser({ ...user, imageUrl: null })\r\n            setImageUrl('')\r\n            setEditImageUrl(false)\r\n            setImage(<></>)\r\n        }\r\n    }, [deleteProfilePicResult.data]) // eslint-disable-line\r\n    const stopEditing = () => {\r\n        setEditImageUrl(false)\r\n        setImageUrl('')\r\n    }\r\n    useEffect(() => {\r\n        if (user && user.imageUrl) {\r\n            setImage(<><Image style={{ height: '100%', width: '100%' }} src={user.imageUrl} fluid></Image><br /></>)\r\n        }\r\n    }, [user])\r\n    return (\r\n        <>\r\n            {user ?\r\n                <Row>\r\n                    <Col md=\"3\">\r\n                        <Row >\r\n                            <div>{image}</div>\r\n                        </Row>\r\n                        <Row>\r\n                            <h2>{user.username}</h2>\r\n                        </Row>\r\n                        <Row >\r\n                            {user.username === currentUser.username ?\r\n                                <>\r\n                                    {editImageUrl ?\r\n                                        <>\r\n                                            <Row>\r\n                                                <input type='text' placeholder='Url of the image...' value={imageUrl} onChange={({ target }) => setImageUrl(target.value)}></input>\r\n                                            </Row>\r\n                                            <Row>\r\n                                                <Button type='button' size='sm' onClick={stopEditing}>Back</Button>\r\n                                                {user.imageUrl ?\r\n                                                    <Button type='button' size='sm' onClick={submitDeleteImage}>Delete image</Button>\r\n                                                    :\r\n                                                    <></>\r\n                                                }\r\n                                                <Button type='button' size='sm' onClick={submitSetImage}>Submit image</Button>\r\n                                            </Row>\r\n                                        </>\r\n                                        :\r\n                                        <Button type='button' size='sm' onClick={() => setEditImageUrl(true)}>Set image</Button>\r\n                                    }\r\n                                </>\r\n                                :\r\n                                <></>\r\n                            }\r\n                        </Row>\r\n                    </Col>\r\n                    <Col md=\"9\">\r\n                        <div>\r\n                            <Chat title={`userChat${username}`}></Chat>\r\n                        </div>\r\n                    </Col>\r\n                </Row>\r\n                :\r\n                <></>\r\n            }\r\n        </>\r\n    )\r\n}\r\n\r\nexport default ProfilePage","import React from 'react'\r\nimport { useRouteMatch } from 'react-router-dom'\r\n\r\nconst ErrorPage = () => {\r\n    const match = useRouteMatch('/error/:errormessage')\r\n    const errormessage = match ? match.params.errormessage : null\r\n\r\n    return (\r\n        <h2>{errormessage}</h2>\r\n    )\r\n}\r\n\r\nexport default ErrorPage","import React from 'react'\r\nimport ChatsPage from './ChatsPage'\r\nimport PinnedChatsPage from './PinnedChatsPage'\r\nimport ReportedChatsPage from './ReportedChatsPage'\r\nimport ReportedCommentsPage from './ReportedCommentsPage'\r\nimport ChatPage from './ChatPage'\r\nimport ProfilePage from './ProfilePage'\r\nimport { Switch, Route, Redirect } from 'react-router-dom'\r\nimport ErrorPage from './ErrorPage'\r\nimport { Container } from 'react-bootstrap'\r\n\r\nconst LoggedInPage = () => {\r\n    return (\r\n        <Container style={{ height: '100%' }}>\r\n            <Switch>\r\n                <Route path='/error/:errormessage'>\r\n                    <ErrorPage></ErrorPage>\r\n                </Route>\r\n                <Route path='/reported/chats'>\r\n                    <ReportedChatsPage></ReportedChatsPage>\r\n                </Route>\r\n                <Route path='/reported/comments'>\r\n                    <ReportedCommentsPage></ReportedCommentsPage>\r\n                </Route>\r\n                <Route path='/chats/:title'>\r\n                    <ChatPage></ChatPage>\r\n                </Route>\r\n                <Route path='/chats'>\r\n                    <ChatsPage></ChatsPage>\r\n                </Route>\r\n                <Route path='/pinnedchats'>\r\n                    <PinnedChatsPage></PinnedChatsPage>\r\n                </Route>\r\n                <Route path='/users/:username'>\r\n                    <ProfilePage></ProfilePage>\r\n                </Route>\r\n                <Route path='/'>\r\n                    <Redirect to='/chats'></Redirect>\r\n                </Route>\r\n            </Switch>\r\n        </Container>\r\n    )\r\n}\r\n\r\nexport default LoggedInPage","import React, { useState, useEffect } from 'react'\r\nimport { Form, Button } from 'react-bootstrap'\r\nimport { useMutation } from '@apollo/client'\r\nimport { SIGNIN } from '../queries/userqueries'\r\nimport Notification from './Notification'\r\nimport { setNotification } from '../reducers/notificationReducer'\r\nimport { setToken } from '../reducers/tokenReducer'\r\nimport { setUser } from '../reducers/userReducer'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { useHistory, Link } from 'react-router-dom'\r\n\r\nconst SigninForm = () => {\r\n    const [username, setUsername] = useState('')\r\n    const [password, setPassword] = useState('')\r\n    const dispatch = useDispatch()\r\n    const history = useHistory()\r\n    const mode = useSelector(state => state.mode)\r\n    const [signin, result] = useMutation(SIGNIN, {\r\n        onError: (error) => {\r\n            dispatch(setNotification({ message: error.graphQLErrors[0].message, error: true }, 10))\r\n        }\r\n    })\r\n    useEffect(() => {\r\n        if (result.data) {\r\n            const token = result.data.createUser.value\r\n            const user = result.data.createUser.user\r\n            dispatch(setToken(token))\r\n            localStorage.setItem('user-token', token)\r\n            history.push('/')\r\n            localStorage.setItem('logged-user', JSON.stringify(user))\r\n            dispatch(setUser(user))\r\n            dispatch(setNotification({ message: 'Signed in', error: false }, 10))\r\n        }\r\n    }, [result.data]) // eslint-disable-line\r\n    const submit = (event) => {\r\n        event.preventDefault()\r\n        signin({ variables: { username, password } })\r\n        setUsername('')\r\n        setPassword('')\r\n    }\r\n    const style = { borderColor: 'grey' }\r\n    if (mode === 'light') {\r\n        style.backgroundColor = 'white'\r\n    } else {\r\n        style.backgroundColor = 'darkgray'\r\n    }\r\n    return (\r\n        <>\r\n            <Notification></Notification>\r\n            <div className='container'>\r\n                <h2>Sign in</h2>\r\n                <Form onSubmit={submit}>\r\n                    <Form.Label>username:</Form.Label>\r\n                    <Form.Control type=\"text\" id='username' style={style} value={username} name=\"username\" onChange={({ target }) => setUsername(target.value)} required />\r\n                    <Form.Label>password:</Form.Label>\r\n                    <Form.Control type=\"password\" id='password' style={style} value={password} name=\"password\" onChange={({ target }) => setPassword(target.value)} required />\r\n                    <Button id='submit' type=\"submit\">Sign in</Button> or <Link to='/login'>Login</Link>\r\n                </Form>\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default SigninForm","const reducer = (state = 'light', action) => {\r\n    switch (action.type) {\r\n        case 'SET_MODE': {\r\n            localStorage.setItem('mode', action.data)\r\n            return action.data\r\n        }\r\n        default: return state\r\n    }\r\n}\r\n\r\nexport const setMode = (mode) => {\r\n    return async dispatch => {\r\n        dispatch({\r\n            type: 'SET_MODE',\r\n            data: mode\r\n        })\r\n    }\r\n}\r\n\r\nexport default reducer","import React from 'react'\r\nimport { Navbar, Nav, Button } from 'react-bootstrap'\r\nimport { Link, useHistory } from 'react-router-dom'\r\nimport Notification from './Notification'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport { setUser } from '../reducers/userReducer'\r\nimport { setToken } from '../reducers/tokenReducer'\r\nimport { setNotification } from '../reducers/notificationReducer'\r\nimport { setMode } from '../reducers/modeReducer'\r\n\r\nconst Navigationbar = () => {\r\n    const currentUser = useSelector(state => state.user)\r\n    const mode = useSelector(state => state.mode)\r\n    const dispatch = useDispatch()\r\n    const history = useHistory()\r\n    const handleLogout = () => {\r\n        window.localStorage.removeItem('user-token')\r\n        window.localStorage.removeItem('logged-user')\r\n        dispatch(setUser(null))\r\n        dispatch(setToken(''))\r\n        dispatch(setNotification({ message: 'Logged out', error: false }, 5))\r\n        history.push('/login')\r\n    }\r\n    if (currentUser) {\r\n        if (currentUser.admin) {\r\n            return (\r\n                <>\r\n                    <Navbar collapseOnSelect expand=\"lg\" bg=\"dark\" variant=\"dark\">\r\n                        <Navbar.Brand href=\"\" as=\"span\">ChatForum</Navbar.Brand>\r\n                        <Nav className=\"mr-auto\">\r\n                            <Nav.Link href=\"#\" as=\"span\" style={{ paddingLeft: '0', paddingRight: '0' }}>\r\n                                {mode === 'light' ?\r\n                                    <Button variant=\"outline-info\" onClick={() => dispatch(setMode('dark'))}>Dark mode</Button>\r\n                                    :\r\n                                    <Button variant=\"outline-info\" onClick={() => dispatch(setMode('light'))}>Light mode</Button>\r\n                                }\r\n                            </Nav.Link>\r\n                        </Nav>\r\n                        <Navbar.Collapse id=\"responsive-navbar-nav\">\r\n                            <Nav className=\"mr-auto\">\r\n                                <Nav.Link href=\"#\" as=\"span\" style={{ paddingLeft: '0', paddingRight: '0' }}>\r\n                                    <Button variant=\"outline-info\" onClick={() => { history.push('/chats') }}>Chats</Button>\r\n                                    <Button variant=\"outline-info\" onClick={() => { history.push('/pinnedchats') }}>Pinned Chats</Button>\r\n                                    <Button variant=\"outline-info\" onClick={() => { history.push('/reported/chats') }}>Reported chats</Button>\r\n                                    <Button variant=\"outline-info\" onClick={() => { history.push('/reported/comments') }}>Reported comments</Button>\r\n                                </Nav.Link>\r\n                            </Nav>\r\n                        </Navbar.Collapse>\r\n                        <Nav className=\"mr-auto\">\r\n                            <Nav.Link href=\"#\" as=\"span\">\r\n                                <Navbar.Text style={{ padding: '0' }} >\r\n                                    <Link to={`/users/${currentUser.username}`}>{currentUser.username}</Link> logged in <Button variant=\"outline-info\" onClick={handleLogout}>Logout</Button><Navbar.Toggle aria-controls=\"responsive-navbar-nav\" />\r\n                                </Navbar.Text>\r\n                            </Nav.Link>\r\n                        </Nav>\r\n                    </Navbar>\r\n                    <Notification></Notification>\r\n                </>\r\n            )\r\n        } else {\r\n            return (\r\n                <>\r\n                    <Navbar collapseOnSelect expand=\"md\" bg=\"dark\" variant=\"dark\">\r\n                        <Navbar.Brand href=\"\" as=\"span\">ChatForum</Navbar.Brand>\r\n                        <Nav className=\"mr-auto\">\r\n                            <Nav.Link href=\"#\" as=\"span\" style={{ paddingLeft: '0', paddingRight: '0' }}>\r\n                                {mode === 'light' ?\r\n                                    <Button variant=\"outline-info\" onClick={() => dispatch(setMode('dark'))}>Dark mode</Button>\r\n                                    :\r\n                                    <Button variant=\"outline-info\" onClick={() => dispatch(setMode('light'))}>Light mode</Button>\r\n                                }\r\n                            </Nav.Link>\r\n                        </Nav>\r\n                        <Navbar.Collapse id=\"responsive-navbar-nav\">\r\n                            <Nav className=\"mr-auto\">\r\n                                <Nav.Link href=\"#\" as=\"span\" style={{ paddingLeft: '0', paddingRight: '0' }}>\r\n                                    <Button variant=\"outline-info\" onClick={() => { history.push('/chats') }}>Chats</Button>\r\n                                    <Button variant=\"outline-info\" onClick={() => { history.push('/pinnedchats') }}>Pinned Chats</Button>\r\n                                </Nav.Link>\r\n                            </Nav>\r\n                        </Navbar.Collapse>\r\n                        <Nav className=\"mr-auto\">\r\n                            <Nav.Link href=\"#\" as=\"span\">\r\n                                <Navbar.Text style={{ padding: '0' }} >\r\n                                    <Link to={`/users/${currentUser.username}`}>{currentUser.username}</Link> logged in <Button variant=\"outline-info\" onClick={handleLogout}>Logout</Button><Navbar.Toggle aria-controls=\"responsive-navbar-nav\" />\r\n                                </Navbar.Text>\r\n                            </Nav.Link>\r\n                        </Nav>\r\n                    </Navbar>\r\n                    <Notification></Notification>\r\n                </>\r\n            )\r\n        }\r\n    } else {\r\n        return (\r\n            <>\r\n                <Navbar collapseOnSelect bg=\"dark\" variant=\"dark\">\r\n                    <Navbar.Brand href=\"\" as=\"span\">ChatForum</Navbar.Brand>\r\n                    <Navbar.Collapse id=\"responsive-navbar-nav\">\r\n                        <Nav className=\"mr-auto\">\r\n                            <Nav.Link href=\"#\" as=\"span\">\r\n                                {mode === 'light' ?\r\n                                    <Button variant=\"outline-info\" onClick={() => dispatch(setMode('dark'))}>Dark mode</Button>\r\n                                    :\r\n                                    <Button variant=\"outline-info\" onClick={() => dispatch(setMode('light'))}>Light mode</Button>\r\n                                }\r\n                            </Nav.Link>\r\n                        </Nav>\r\n                    </Navbar.Collapse>\r\n                </Navbar>\r\n                <Notification></Notification>\r\n            </>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Navigationbar","import React from 'react'\r\nimport { Switch, Route, Redirect } from 'react-router-dom'\r\nimport LoginForm from './components/LoginForm'\r\nimport LoggedInPage from './components/LoggedInPage'\r\nimport SigninForm from './components/SigninForm'\r\nimport Navgationbar from './components/Navigationbar'\r\nimport { useSelector } from 'react-redux'\r\n\r\nconst App = () => {\r\n    const token = useSelector(state => state.token)\r\n    const mode = useSelector(state => state.mode)\r\n    const style = {\r\n        width: '100%',\r\n        height: '100%',\r\n        left: 0,\r\n        top: 0,\r\n        zIndex: 10\r\n    }\r\n    if (mode === 'light') {\r\n        document.body.style.backgroundColor = 'white'\r\n\r\n    } else {\r\n        document.body.style.backgroundColor = 'darkgray'\r\n    }\r\n    return (\r\n        <div style={style}>\r\n            <Navgationbar></Navgationbar>\r\n            <Switch>\r\n                <Route path='/signin'>\r\n                    {token ?\r\n                        <Redirect to='/chats'></Redirect>\r\n                        :\r\n                        <SigninForm></SigninForm>\r\n                    }\r\n                </Route>\r\n                <Route path='/login'>\r\n                    {token ?\r\n                        <Redirect to='/chats'></Redirect>\r\n                        :\r\n                        <LoginForm></LoginForm>\r\n                    }\r\n                </Route>\r\n                <Route path='/'>\r\n                    {token ?\r\n                        <>\r\n                            <LoggedInPage></LoggedInPage>\r\n                        </>\r\n                        :\r\n                        <Redirect to='/login'></Redirect>\r\n                    }\r\n                </Route>\r\n            </Switch>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default App","import { createStore, combineReducers, applyMiddleware } from 'redux'\r\nimport notificationReducer from './reducers/notificationReducer'\r\nimport userReducer from './reducers/userReducer'\r\nimport tokenReducer from './reducers/tokenReducer'\r\nimport modeReducer from './reducers/modeReducer'\r\nimport { composeWithDevTools } from 'redux-devtools-extension'\r\nimport thunk from 'redux-thunk'\r\n\r\nconst reducer = combineReducers({\r\n    notification: notificationReducer,\r\n    user: userReducer,\r\n    token: tokenReducer,\r\n    mode: modeReducer\r\n})\r\n\r\nconst store = createStore(\r\n    reducer,\r\n    composeWithDevTools(applyMiddleware(thunk))\r\n)\r\n\r\nexport default store"],"sourceRoot":""}